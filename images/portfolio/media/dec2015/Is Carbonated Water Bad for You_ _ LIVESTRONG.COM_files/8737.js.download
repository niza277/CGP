/* LEGAL NOTICE: COPYRIGHT 2016 THE RUBICON PROJECT, INC.  ALL RIGHTS RESERVED. THIS CODE CONTAINS TRADE SECRETS OR OTHERWISE CONFIDENTIAL AND/OR PROPRIETARY INFORMATION THAT IS THE EXCLUSIVE INTELLECTUAL PROPERTY OF THE RUBICON PROJECT, INC.  AND IS PROTECTED BY COPYRIGHT, TRADE SECRET AND/OR OTHER STATE AND FEDERAL LAW.  SEE http://bit.ly/1g7QAOO FOR FULL TERMS AND CONDITIONS. */
!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){!function(a,c){"use strict";"object"==typeof b&&"object"==typeof b.exports?b.exports=c():"function"==typeof define&&define.amd?define([],c):a.objectPath=c()}(this,function(){"use strict";function a(a,b){return null==a?!1:Object.prototype.hasOwnProperty.call(a,b)}function b(b){if(!b)return!0;if(i(b)&&0===b.length)return!0;if("string"!=typeof b){for(var c in b)if(a(b,c))return!1;return!0}return!1}function c(a){return h.call(a)}function d(a){return"object"==typeof a&&"[object Object]"===c(a)}function e(a){return"boolean"==typeof a||"[object Boolean]"===c(a)}function f(a){var b=parseInt(a);return b.toString()===a?b:a}function g(c){function g(b,d){return c.includeInheritedProps||"number"==typeof d&&Array.isArray(b)||a(b,d)?b[d]:void 0}function h(a,b,c,d){if("number"==typeof b&&(b=[b]),!b||0===b.length)return a;if("string"==typeof b)return h(a,b.split(".").map(f),c,d);var e=b[0],i=g(a,e);return 1===b.length?(void 0!==i&&d||(a[e]=c),i):(void 0===i&&("number"==typeof b[1]?a[e]=[]:a[e]={}),h(a[e],b.slice(1),c,d))}c=c||{};var j=function(a){return Object.keys(j).reduce(function(b,c){return"create"===c?b:("function"==typeof j[c]&&(b[c]=j[c].bind(j,a)),b)},{})};return j.has=function(b,d){if("number"==typeof d?d=[d]:"string"==typeof d&&(d=d.split(".")),!d||0===d.length)return!!b;for(var e=0;e<d.length;e++){var g=f(d[e]);if(!("number"==typeof g&&i(b)&&g<b.length||(c.includeInheritedProps?g in Object(b):a(b,g))))return!1;b=b[g]}return!0},j.ensureExists=function(a,b,c){return h(a,b,c,!0)},j.set=function(a,b,c,d){return h(a,b,c,d)},j.insert=function(a,b,c,d){var e=j.get(a,b);d=~~d,i(e)||(e=[],j.set(a,b,e)),e.splice(d,0,c)},j.empty=function(c,f){if(!b(f)&&null!=c){var g,h;if(g=j.get(c,f)){if("string"==typeof g)return j.set(c,f,"");if(e(g))return j.set(c,f,!1);if("number"==typeof g)return j.set(c,f,0);if(i(g))g.length=0;else{if(!d(g))return j.set(c,f,null);for(h in g)a(g,h)&&delete g[h]}}}},j.push=function(a,b){var c=j.get(a,b);i(c)||(c=[],j.set(a,b,c)),c.push.apply(c,Array.prototype.slice.call(arguments,2))},j.coalesce=function(a,b,c){for(var d,e=0,f=b.length;f>e;e++)if(void 0!==(d=j.get(a,b[e])))return d;return c},j.get=function(a,b,c){if("number"==typeof b&&(b=[b]),!b||0===b.length)return a;if(null==a)return c;if("string"==typeof b)return j.get(a,b.split("."),c);var d=f(b[0]),e=g(a,d);return void 0===e?c:1===b.length?e:j.get(a[d],b.slice(1),c)},j.del=function(a,c){if("number"==typeof c&&(c=[c]),null==a)return a;if(b(c))return a;if("string"==typeof c)return j.del(a,c.split("."));var d=f(c[0]),e=g(a,d);if(null==e)return e;if(1===c.length)i(a)?a.splice(d,1):delete a[d];else if(void 0!==a[d])return j.del(a[d],c.slice(1));return a},j}var h=Object.prototype.toString,i=Array.isArray||function(a){return"[object Array]"===h.call(a)},j=g();return j.create=g,j.withInheritedProps=g({includeInheritedProps:!0}),j})},{}],2:[function(a,b,c){var d=a(23),e=a(17);if(b.exports.rubicontag=new e,void 0!==d&&("object"!=typeof d.rubicontag||"object"!=typeof d.rubicontag.cmd||"[object Array]"===Object.prototype.toString.call(d.rubicontag.cmd))){a(21);d.rubicontag&&(d.origrubicontag=d.rubicontag),d.rubicontag=b.exports.rubicontag;a(11)}},{11:11,17:17,21:21,23:23}],3:[function(a,b,c){"use strict";var d=a(24),e=a(14),f=a(22),g=function(){var a,b=this,c=new d;b.requestTime=0;var g=null,h=null,i=null,j={url:"",type:"post",cache:!1,async:!0,dataType:"json",data:null,timeout:0,jsonpCallback:"",jsonpCallbackParam:""};b.getUrl=function(){return j.url},b.ajax=function(d){if(j=f.mergeObjects(j,d,!0),"jsonp"===j.dataType.toLowerCase()){if(j.type="GET",!j.jsonpCallback){if(!j.jsonpCallbackParam)return f.error("cannot create a jsonp request with no callback or callbackParam specified:",j),b;var h="rp_callback_"+parseInt(1e8*Math.random(),10);j.data=j.data||{},j.data[j.jsonpCallbackParam]=h,j.jsonpCallback=h}c=new e(j.jsonpCallback)}var i=[];if("get"===j.type.toLowerCase()&&j.data)for(var k in j.data)j.data.hasOwnProperty(k)&&i.push(encodeURIComponent(k)+"="+encodeURIComponent(j.data[k]));return j.cache!==!0&&"get"===j.type.toLowerCase()&&i.push(1e18*Math.random()),i.length>0&&(j.url+=j.url.indexOf("?")>0?"&":"?",j.url+=i.join("&")),c.open(j.type,j.url,j.async),c.withCredentials=!0,j.timeout&&j.async&&(c.timeout=j.timeout),"post"===j.type.toLowerCase()&&(j.contentType=j.contentType||"application/x-www-form-urlencoded",j.url.indexOf("optimized-by-adv.rubiconproject.com")>0&&j.url.indexOf("auction/fastlane")>0&&(j.contentType="text/plain"),c.setRequestHeader("Content-type",j.contentType)),c.onreadystatechange=g,a=(new Date).getTime(),c.send("get"!==j.type.toLowerCase()?j.data:null),b},g=function(){if(4===c.readyState)if(b.requestTime=(new Date).getTime()-a,c.requestTime=b.requestTime,200===c.status)for(;h.length;)h.shift()(c);else for(;i.length;)i.shift()(c)},h=[],i=[],b.done=function(a){return c&&4===c.readyState&&200===c.status?a(c):h.push(a),b},b.fail=function(a){return c&&4===c.readyState&&200!==c.status?a(c):i.push(a),b},b.always=function(a){return c&&4===c.readyState?a(c):(h.push(a),i.push(a)),b},b.abort=function(){return c.abort(),b}};b.exports=g},{14:14,22:22,24:24}],4:[function(a,b,c){"use strict";var d=a(8),e=a(22),f=a(3),g=function(){var a=this,b=!1,c=null,g=null,h=e.browserSupportsXHR(),i={nAccountId:null,oBatching:{bEnabled:!0,nBatchSize:100,nBatchWindow:3e3},sHost:"stats.aws.rubiconproject.com/stats/",sBucket:"fastlane"},j=[],k=null,l=function(b){var c=b[0];i.nAccountId=c.accountId;var d=c&&c.configuration&&c.configuration.analytics?c.configuration.analytics:{};return i.sBucket=d.bucket?d.bucket:i.sBucket,i.sHost=d.host?d.host:i.sHost,i.sHost.match(/^http(s)?:/)||(i.sHost=e.getProtocol()+i.sHost),d.batching&&(i.oBatching.bEnabled="boolean"==typeof d.batching.enabled?d.batching.enabled:i.oBatching.bEnabled,i.oBatching.nBatchSize=isNaN(d.batching.batchSize)?i.oBatching.nBatchSize:d.batching.batchSize,i.oBatching.nBatchWindow=isNaN(d.batching.batchWindow)?i.oBatching.nBatchWindow:d.batching.batchWindow),e.addUserDistractionEventListener(function(){a.flushEvents()}),a};a.publish=function(e,f){return b||(b=!0,l(d.getConfigs())),i.oBatching.bEnabled&&h?c(e,f):g([{sEventCode:e,sLine:f}]),a},c=function(b,c){j.push({sEventCode:b,sLine:c}),j.length>=i.oBatching.nBatchSize?a.flushEvents():null===k&&(k=setTimeout(function(){a.flushEvents()},i.oBatching.nBatchWindow))},g=function(a){var b=[],c=0;if(h){for(c=0;c<a.length;c++)b.push(encodeURIComponent(i.sBucket+"/"+a[c].sLine));var d=b.join("|"),e=new f;e.ajax({url:i.sHost,type:"POST",async:!0,data:d})}else for(c=0;c<a.length;c++){var g=i.sHost;g+=encodeURIComponent(i.sBucket)+"/";var j=encodeURIComponent(a[c].sLine);j=j.replace(/%2F/g,"/"),(new Image).src=g+j+"?rnd="+Math.random()}},a.flushEvents=function(){var a=j;j=[],null!==k&&(clearTimeout(k),k=null),a.length&&g(a)}};b.exports=new g},{22:22,3:3,8:8}],5:[function(a,b,c){"use strict";function d(a){var b=a.nConfigIndex||0,c=h.getConfigValue(b,"accountId"),d=a.oTimeout,e=a.nLowestTierFloor,n=a.oFinishedSlots,o=a.fSuccessResponse,p=a.fFailedResponse,q=a.aBaseUrls,r=0,s=null,t=null;f.info("Sending multiple auction requests"),a.bUseJsonp&&(l=a.bUseJsonp);var u={url:"",type:"GET",cache:!0,async:!0,dataType:"",data:null};l&&(u.dataType="jsonp",u.jsonpCallbackParam="cb",k.factory("FL_USING_JSONP_REQUEST",{nAccountId:c})),s=function(a,b,c,d){var g=f.getProtocol(),h=t(),i=e,j=Math.random(),k=b.getKWs(),l=b.getFPV(),n=b.getFPI(),o={account_id:a,site_id:b.getSiteId(a),zone_id:b.getZoneId(a),size_id:c,p_pos:b.getPosition(),rp_floor:Math.max(i,.01),rf:f.getFullPageUrl(),p_screen_res:f.getScreenResolution(),"tg_fl.eid":b.getElementId()};if(d&&d.length>0&&(o.alt_size_ids=d),k.push("rp.fastlane"),o.kw=k.join(","),f.getIntegration()&&(o.tk_flint=f.getIntegration()),l.length){var p=f.generateComplexQueryStringObject(l,"tg_v");o=f.mergeObjects(o,p,!0)}if(n.length){var q=f.generateComplexQueryStringObject(n,"tg_i");o=f.mergeObjects(o,q,!0)}var r=m.getUserKey();if(r&&(o.tk_user_key=r),window.rp_cruid&&window.rp_crnetids)for(var s=window.rp_crnetids,u=0;u<s.length;u++)o["put_"+s[u]]=encodeURIComponent(window.rp_cruid);return o.rand=j,[g,h,"?",f.convertObjectToQueryString(o)].join("")},t=function(){return r++,r>=q.length&&(r=0),q[r]};var v=new j(15e3),w={};return w.addSlot=function(a,b,e){u.url=s(c,a,b,e),g.mark("fastlane.run.auctionRequest"),g.measure("buildAuctionRequest","fastlane.run","fastlane.run.auctionRequest");var f=new i;v.addRequest(f.ajax(u).done(o([a],f,d,n,b)).fail(p([a],f,d,b)))},w.finishAuction=function(){v.allRequestsAdded(),f.info("fastlane:","sent ",v.totalRequests()," auction request(s)")},w.manager=v,w.totalRequests=function(){return v.totalRequests()},w.getSuccessfulRequests=function(){return v.getSuccessfulRequests().length},w.finished=v.finished,w}function e(a){f.info("Sending single auction request (SRA)");var b=a.nConfigIndex||0,c=h.getConfigValue(b,"accountId"),d=a.oTimeout,e=a.nLowestTierFloor,k=a.oFinishedSlots,l=a.fSuccessResponse,n=a.fFailedResponse,o=(a.aBaseUrls,{}),p=function(a){for(var b={},c=0;c<a.length;c++)b[a[c].key]=a[c].value;return b},q=function(a){var b=a.getKWs();b.push("rp.fastlane");var d={element_id:a.getElementId(),name:a.getSlotName(),dimensions:a.getRubiconSizeIds(c).map(f.convertSizeIdToDimensions),position:a.getPosition(),site_id:a.getSiteId(c),zone_id:a.getZoneId(c),floor:e||.01,keywords:b},g=a.getFPI();g&&g.length&&(d.inventory=p(g));var h=a.getFPV();if(h&&h.length&&(d.visitor=p(h)),"video"===a.getSlotType()){var i=a.getPlayerSize();d.language=a.getLanguage(),d.width=i.width,d.height=i.height,d.size_id=a.getRubiconSizeIds(c)[0]}return d},r={},s=new j(15e3),t=function(a){return"video"===a?"video":"fastlane"},u=f.getProtocol()+"optimized-by-adv.rubiconproject.com/v1/auction/",v={url:u+t(),type:"POST",cache:!0,async:!0,dataType:"",contentType:"application/json",data:{page_url:f.getFullPageUrl(),resolution:f.getScreenResolution(),account_id:c,integration:f.getIntegration(),stash_creatives:!1,timeout:(d.nTimeout||1e3)-(f.getABTestParam("timeoutBuffer")||0),slots:[]}},w=parseFloat(f.getUrlSessionParam("rp_cpm_override"));w&&(v.data.cpm_override=w);var x=parseFloat(f.getUrlSessionParam("rp_deal_override"));x&&(v.data.deal_override=x);var y=m.getUserKey();return y&&(v.data.user_key=y),r.addSlot=function(a){var b=a.getSlotType();o[b]||(o[b]=[]),o[b].push(a)},r.finishAuction=function(){g.mark("fastlane.run.auctionRequest"),g.measure("buildAuctionRequest","fastlane.run","fastlane.run.auctionRequest");for(var a in o)if(o.hasOwnProperty(a)&&o[a]){var b=f.mergeObjects(v.data,{});b.slots=o[a].map(q),"video"===a&&(b.stash_creatives=!0);var c=f.mergeObjects(v,{url:u+t(a),data:JSON.stringify(b)}),e=new i;s.addRequest(e.ajax(c).done(l(o[a],e,d,k)).fail(n(o[a],e,d))),f.info("sent SRA request with ",o[a].length,a," auction request(s)")}s.allRequestsAdded(),f.info("sent ",s.totalRequests()," SRA request(s)")},r.totalRequests=function(){return s.totalRequests()},r.getSuccessfulRequests=function(){return s.getSuccessfulRequests().length},r.finished=s.finished,r}var f=a(22),g=a(15),h=a(8),i=a(3),j=a(16),k=a(10),l=!f.browserSupportsXHR(),m=a(13);f.isSingleRequest()?b.exports=e:b.exports=d},{10:10,13:13,15:15,16:16,22:22,3:3,8:8}],6:[function(a,b,c){"use strict";function d(a,b,c){var d=this,f=[],g=!1,h=function(){g=!1,a.blur(),window.focus()},i=function(){g=!0},j=function(){a.onmouseover=function(){i()},a.onmouseout=function(){h()},"undefined"!=typeof window.attachEvent?window.attachEvent("onblur",function(){d.firePixels()}):"undefined"!=typeof window.addEventListener&&window.addEventListener("blur",function(){d.firePixels()},!1)};d.init=function(){var a=!1;e.isArray(b)||(b=[b]),f=[];for(var c=0;c<b.length;c++)a=d.addTrackingUrl(b[c]),a||e.debug("Click tracker URL is not valid and could not be added",b[c]);j()},d.addTrackingUrl=function(a){return e.isUrl(a)?Boolean(f.push(a)):!1},d.replaceMacrosInUrl=function(a,b){var c={};if(!e.isArray(a)||!a.length)return[];c.siteId=b.siteId||"",c.zoneId=b.zoneId||"",c.sizeId=b.sizeId||"",c.userId=b.userId||"";for(var d=0;d<a.length;d++)"string"==typeof a[d]&&e.isUrl(a[d])&&(a[d]=e.replaceMacrosWithinUrl(a[d],b));return a},d.firePixels=function(){var a,b;if(g&&e.isArray(f)&&f.length){a=d.replaceMacrosInUrl(f,c),e.debug("Tracking click using the following pre-resolved, pre-cleaned URLs",f),e.warn("Tracking click using the following fully-resolved URLs",a);for(var h=0;h<a.length;h++)b=new window.Image,b.src=a[h];b=void 0}},d.init()}var e=a(22);b.exports=d},{22:22}],7:[function(a,b,c){"use strict";var d=(a(23),function(){var a=this;a.push=function(a){a()}});b.exports=new d},{23:23}],8:[function(a,b,c){"use strict";var d=function(){var b=this,c=[],d=[],e=a(1);b.getConfigs=function(){return c},b.hasConfig=function(){return c.length>0},b.addConfig=function(a){c.push(a);for(var b=0;b<d.length;b++)d[b]()},b.onLoad=function(a){"[object Function]"===Object.prototype.toString.call(a)&&d.push(a)},b.getConfigValue=function(a,b,d){return a>=c.length?d:e.get(c[a],b,d)}};b.exports=new d},{1:1}],9:[function(a,b,c){"use strict";var d=a(22),e=a(19),f=(a(10),function(){var a=this,b=new e,c={},f={},g=null;a.setFPI=function(a,b){d.isArray(b)||(b=[b]),c[a]=b},a.addFPI=function(a,b){c.hasOwnProperty(a)&&d.isArray(c[a])||(c[a]=[]),d.isArray(b)||(b=[b]);for(var e=0;e<b.length;e++){var f=b[e];d.inArray(f,c[a])||c[a].push(f)}},a.getFPI=function(){return g(c)},a.setFPV=function(a,b){d.isArray(b)||(b=[b]),f[a]=b},a.addFPV=function(a,b){f.hasOwnProperty(a)&&d.isArray(f[a])||(f[a]=[]),d.isArray(b)||(b=[b]);for(var c=0;c<b.length;c++){var e=b[c];d.inArray(e,f[a])||f[a].push(e)}},a.getFPV=function(){return g(f)},a.addKW=function(a){if(void 0!==a){d.isArray(a)||(a=[a]);for(var c=0;c<a.length;c++)b.add(a[c])}},a.getKWs=function(){return b.toArray()},g=function(a){return d.convertKeyValuePairObjectToArray(a)}});b.exports=f},{10:10,19:19,22:22}],10:[function(a,b,c){"use strict";var d=a(8),e=a(4),f=a(22),g={},h={},i={LOG_DISABLE:1/0,LOG_ALWAYS:0,LOG_ERROR:1,LOG_WARN:2,LOG_INFO:3,LOG_DEBUG:4,LOG_TEST:5},j={BAD_EVENT:{sLabel:"badEvent",sAnalyticsPattern:"bad-event/{sEventType}",sLogPattern:"Unknown event triggered: {sEventType}",nAnalyticsLevel:i.LOG_DISABLE,nLogLevel:i.LOG_ERROR},HL_INIT:{sLabel:"init",sAnalyticsPattern:"init/{nAccountId}/{sVersion}/{sIntegration}",sLogPattern:"initialized account: {nAccountId}",nAnalyticsLevel:i.LOG_DISABLE,nLogLevel:i.LOG_DEBUG},HL_RUN_CALLED:{sLabel:"runCalled",sAnalyticsPattern:"run-called/{nAccountId}",sLogPattern:"rubicontag.run() function called",nAnalyticsLevel:i.LOG_DISABLE,nLogLevel:i.LOG_DEBUG},HL_BAD_TIMEOUT:{sLabel:"badTimeout",sAnalyticsPattern:"badtimeout/{nTimeout}",sLogPattern:"Invalid timeout value: {nTimeout}. Must be at least 300",nAnalyticsLevel:i.LOG_DISABLE,nLogLevel:i.LOG_ERROR},HL_BAD_DEFINE_SLOT:{sLabel:"badDefineSlot",sAnalyticsPattern:"",sLogPattern:"Too few arguments passed to defineSlot. Name: {sSlotName}; sizes list: {aDimensions}; element ID: {sElementId}.",nAnalyticsLevel:i.LOG_WARN,nLogLevel:i.LOG_WARN},HL_BAD_DEFINE_SLOT_FROM_OBJ:{sLabel:"badDefineSlotFromObj",sAnalyticsPattern:"",sLogPattern:"Incorrect object params passed to defineSlot. SiteId: {nSiteId}; zoneId: {nZoneId}; sizes list: {aSizes}; unique id: {nId}.",nAnalyticsLevel:i.LOG_WARN,nLogLevel:i.LOG_WARN},SLOT_SIZE_NOT_MAPPED:{sLabel:"slotSizeNotMapped",sAnalyticsPattern:"slot-size-not-mapped/{sDimensions}/{sSlotName}",sLogPattern:"Could not map dimension: {sDimensions} for slot: {sSlotName}.",nAnalyticsLevel:i.LOG_DISABLE,nLogLevel:i.LOG_DEBUG},SLOT_GET_TARGETING:{sLabel:"getTargeting",sAnalyticsPattern:"slot-targeting-get/{nAccountId}/{nSiteId}/{nZoneId}/{nSizeId}/{sTier}/{sValue}/{sIntegration}/{sContext}/{nLatency}",sLogPattern:"[{sElementId}] Getting Ad Server Targeting for Key={sKey}, Value={sValue}",nAnalyticsLevel:i.LOG_ALWAYS,nLogLevel:i.LOG_INFO},SLOT_MAPPING_PERFORMANCE:{sLabel:"slotMappingPerformance",sAnalyticsPattern:"slot-mapping-performance/{nTotalTime}/{nAverageTime}",sLogPattern:"Slot mapping took {nTotalTime}ms to execute.",nAnalyticsLevel:i.LOG_ALWAYS,nLogLevel:i.LOG_INFO},HL_CREATIVE_RENDERED:{sLabel:"creativeRenderCalled",sAnalyticsPattern:"render/{nAccountId}/{nSiteId}/{nZoneId}/{nSizeId}/{sTier}/{nCpm}/{sAuctionId}/{sIntegration}",sLogPattern:"Creative rendering called for size: {nSizeId}, element: {sElementId}, account: {nAccountId}.",nAnalyticsLevel:i.LOG_ALWAYS,nLogLevel:i.LOG_INFO,oListenerParams:{accountId:"nAccountId",siteId:"nSiteId",zoneId:"nZoneId",sizeId:"nSizeId",slotId:"sSlotName",elementId:"sElementId",creativeId:"nCreativeId",adId:"nAdId",advertiserId:"nAdvertiserId",networkId:"nNetworkId",aqId:"sAqId"}},HL_CREATIVE_RENDER_SLOT_NOT_FOUND:{sLabel:"creativeRenderSlotNotFound",sAnalyticsPattern:"render-no-slot/{nSizeId}/{sElementId}/{nAccountId}",sLogPattern:"Creative rendering could not find slot for size: {nSizeId}, element: {sElementId}, account: {nAccountId}.",nAnalyticsLevel:i.LOG_DISABLE,nLogLevel:i.LOG_ERROR},HL_CREATIVE_RENDER_CREATIVE_NOT_FOUND:{sLabel:"creativeRenderCreativeNotFound",sAnalyticsPattern:"render-no-creative/{nSizeId}/{sElementId}/{nAccountId}",sLogPattern:"Creative rendering could not find creative for size: {nSizeId}, element: {sElementId}, account: {nAccountId}.",nAnalyticsLevel:i.LOG_DISABLE,nLogLevel:i.LOG_ERROR},FL_RUN:{sLabel:"runLatency",sAnalyticsPattern:"run/{nLatency}/",sLogPattern:"Execution from init to run took {nLatency} ms",nAnalyticsLevel:i.LOG_ALWAYS,nLogLevel:i.LOG_DEBUG},FL_RESPONSE_SUCCESS:{sLabel:"responseSuccess",sAnalyticsPattern:"response/success/{nStatusCode}/{sRequestType}/{nTimeout}/{nRequestTime}/{nAccountId}/{nSiteId}/{nZoneId}/{nSizeId}",sLogPattern:"Auction request finished successfully before timeout {nTimeout} in {nRequestTime} ms, elementId: {sElementId}, sizeId: {nSizeId}.",nAnalyticsLevel:i.LOG_ALWAYS,nLogLevel:i.LOG_DEBUG},FL_RESPONSE_TIMEOUT:{sLabel:"responseTimeout",sAnalyticsPattern:"response/timeout/{nStatusCode}/{sRequestType}/{nTimeout}/{nRequestTime}/{nAccountId}/{nSiteId}/{nZoneId}/{nSizeId}",sLogPattern:"Auction request finished AFTER timeout {nTimeout} in {nRequestTime} ms, elementId: {sElementId}, sizeId: {nSizeId}.",nAnalyticsLevel:i.LOG_ALWAYS,nLogLevel:i.LOG_DEBUG},FL_RESPONSE_FAILURE:{sLabel:"responseFailure",sAnalyticsPattern:"response/failure/{nStatusCode}/{sRequestType}/{nTimeout}/{nRequestTime}/{nAccountId}/{nSiteId}/{nZoneId}/{nSizeId}",sLogPattern:"Auction request failed: {sStatus}, with status code {nStatusCode}, elementId: {sElementId}, sizeId: {nSizeId}.",nAnalyticsLevel:i.LOG_ALWAYS,nLogLevel:i.LOG_WARN},FL_RESPONSE_PARSE_ERROR:{sLabel:"responseParseError",sAnalyticsPattern:"parse-error/{sSlotName}/size/{nSizeId}/response/{sRequestData}",sLogPattern:"Error parsing response data: {sRequestData}.",nAnalyticsLevel:i.LOG_DISABLE,nLogLevel:i.LOG_DEBUG},FL_BAD_RESPONSE_STATUS:{sLabel:"badResponseStatus",sAnalyticsPattern:"status/{sStatus}",sLogPattern:"Invalid auction ad: {sStatus} / {sReason}",nAnalyticsLevel:i.LOG_DISABLE,nLogLevel:i.LOG_DEBUG},FL_BAD_SLOT_MAPPING:{sLabel:"badSlotMapping",sAnalyticsPattern:"bad-slotmapping/{nAccountId}/{sElementId}/{nSiteId}/{nZoneId}/{nAeSiteId}/{nAeZoneId}",sLogPattern:"Bad Ad Engine Slot Mapping: element: {sElementId}, site: {nSiteId}, zone: {nZoneId}, aeSite: {nAeSiteId}, aeZone: {nAeZoneId}",nAnalyticsLevel:i.LOG_ALWAYS,nLogLevel:i.LOG_WARN},FL_BAD_TIER_MAPPING:{sLabel:"badTierMapping",sAnalyticsPattern:"bad-tiermapping/{nAccountId}/{sElementId}/{sTier}/{sAeTier}",sLogPattern:"Bad Ad Engine Tier Mapping: element: {sElementId}, tier: {sTier}, aeTier: {sAeTier}",nAnalyticsLevel:i.LOG_ALWAYS,nLogLevel:i.LOG_WARN},FL_AUCTION_CPM_OVERRIDE:{sLabel:"auctionCpmOverride",sAnalyticsPattern:"cpm-override/{nOriginalCpm}/{nOverrideCpm}",sLogPattern:"Overriding Auction CPM. Original: {nOriginalCpm}. Override: {nOverrideCpm}",nAnalyticsLevel:i.LOG_DISABLE,nLogLevel:i.LOG_ERROR},FL_NO_ADS:{sLabel:"noAds",sAnalyticsPattern:"no-ads/{sSlotName}",sLogPattern:"No ads found for slot: {sSlotName}",nAnalyticsLevel:i.LOG_DISABLE,nLogLevel:i.LOG_DEBUG},FL_RESPONSE_UNFIT:{sLabel:"responseUnfit",sAnalyticsPattern:"response-unfit/{nAccountId}/{nSiteId}/{nZoneId}/{nSizeId}/{sSlotName}/{bResponseTimedOut}/{sIntegration}",sLogPattern:"Response for slot: {sSlotName} using size: {nSizeId}. Did not have any ads associated with it.",nAnalyticsLevel:i.LOG_ALWAYS,nLogLevel:i.LOG_INFO},FL_TIER_MAPPED:{sLabel:"tierMapped",sAnalyticsPattern:"tier-mapped/{nAccountId}/{nSiteId}/{nZoneId}/{nSizeId}/{sTier}/{nCpm}/{bResponseTimedOut}/{sIntegration}",sLogPattern:"Tier mapped. Price: {nCpm}. Tier: {sTier}. Slot: {sElementId}.",nAnalyticsLevel:i.LOG_ALWAYS,nLogLevel:i.LOG_INFO,oListenerParams:{accountId:"nAccountId",elementId:"sElementId",sizeId:"nSizeId"}},FL_TIER_NOT_MAPPED:{sLabel:"tierNotMapped",sAnalyticsPattern:"tier-not-mapped/{nAccountId}/{nSiteId}/{nZoneId}/{nSizeId}/{nPrice}/{bResponseTimedOut}/{sIntegration}",sLogPattern:'Could not map "{nPrice}" to any tier for slot "{sSlotName}".',nAnalyticsLevel:i.LOG_WARN,nLogLevel:i.LOG_DEBUG},FL_TIER_SPECIFICITY_PRICE:{sLabel:"tierSpecificityPrice",sAnalyticsPattern:"",sLogPattern:"Price matched for tier: {sTierMapping}. Bounds: {nFloor} <= {nAuctionCpm} <= {nCeiling}. Points: {nPoints}.",nAnalyticsLevel:i.LOG_DISABLE,nLogLevel:i.LOG_INFO},FL_EXCEEDED_REQUESTS_PER_SLOT:{sLabel:"exceededReqPerSlotLimit",sAnalyticsPattern:"exceed-slot-requests/{sSlotName}/limit/{nLimit}",sLogPattern:"Exceeded size limit per slot for slot: {sSlotName}. Limit: {nLimit}.",nAnalyticsLevel:i.LOG_DISABLE,nLogLevel:i.LOG_WARN},FL_EXCEEDED_REQUESTS_PER_PAGE:{sLabel:"exceededReqPerPageLimit",sAnalyticsPattern:"exceed-page-requests/{nLimit}",sLogPattern:"Exceeded requests-per-page limit: {nLimit}.",nAnalyticsLevel:i.LOG_DISABLE,nLogLevel:i.LOG_WARN},FL_USING_JSONP_REQUEST:{sLabel:"usingJsonpRequest",sAnalyticsPattern:"using-jsonp-request/{nAccountId}",sLogPattern:"Using JSONP rather than xhr for auction requests.",nAnalyticsLevel:i.LOG_DISABLE,nLogLevel:i.LOG_INFO},FL_CREATIVE_CACHED:{sLabel:"creativeCached",sAnalyticsPattern:"creative-cached/{nAccountId}/{nSiteId}/{nZoneId}/{nSizeId}",sLogPattern:"Found creative for slot: {sSlotName}, size: {nSizeId}. Skipping auction.",nAnalyticsLevel:i.LOG_DISABLE,nLogLevel:i.LOG_WARN},FL_SLOT_AUCTION:{sLabel:"slotAuction",sAnalyticsPattern:"slot-auction/{nAccountId}/{nSiteId}/{nZoneId}/{nSizeId}/{sIntegration}",sLogPattern:"Running auction for slot: {sSlotName}, size: {nSizeId}, account: {nAccountId}.",nAnalyticsLevel:i.LOG_ALWAYS,nLogLevel:i.LOG_DEBUG}},k=!1,l=function(){k||(k=!0,g.nAnalyticsLevel=d.getConfigValue(0,"configuration.analyticsLevel"),g.nAccountId=d.getConfigValue(0,"accountId"),g.nLogLevel=parseInt(f.getUrlSessionParam("rp_loglevel"),10),isNaN(g.nLogLevel)&&(g.nLogLevel=d.getConfigValue(0,"configuration.logLevel",0)))},m=function(a,b){var c=this;l();var d,k=!1;c.publish=function(){if(!k){k=!0,j.hasOwnProperty(a)||(b={sEventType:a},a="BAD_EVENT");var c=j[a];if(f.getIntegration()&&(b.sIntegration=f.getIntegration()),c.nAnalyticsLevel<=g.nAnalyticsLevel){var h=c.sAnalyticsPattern;g.nAnalyticsLevel===i.LOG_TEST&&f.inArray(c.sLabel,["slotAuction","getTargeting","responseSuccess","responseTimeout","responseFailure"])&&(h+="/{sElementId}/{sSlotName}"),d=f.formatString(h,b,!0),d="account/"+g.nAccountId+"/"+d;var l=f.getABLabel();l&&f.inArray(c.sLabel,["slotAuction","getTargeting","creativeRenderCalled","responseSuccess","responseFailure","responseTimeout"])&&(d+="/"+l),e.publish(c.sLabel,d)}c.nLogLevel<=g.nLogLevel&&(d=f.formatString(c.sLogPattern,b),c.nLogLevel===i.LOG_ERROR?f.error(d):c.nLogLevel===i.LOG_WARN?f.warn(d):c.nLogLevel===i.LOG_INFO?f.info(d):c.nLogLevel===i.LOG_DEBUG&&f.debug(d))}};var m=function(){var c=h[a];if(c){var d=j[a].oListenerParams,e={};for(var g in d)d.hasOwnProperty(g)&&(e[g]=b[d[g]]);for(var i=0;i<c.length;i++)try{c[i](e)}catch(k){f.error(a,"event listener failed:",c[i],k)}}};m()};m.factory=function(a,b,c){var d=new m(a,b);return(arguments.length<=2||c)&&d.publish(),d},m.addEventListener=function(a,b){var c=d.getConfigValue(0,"configuration.exposedEvents",[]);return f.inArray(a,c)||"FL_TIER_MAPPED"===a&&f.inArray(f.getIntegration(),["pbjs","rppb"])?j[a]&&j[a].oListenerParams?f.isFunction(b)?(h[a]||(h[a]=[]),h[a].push(b),!0):(f.error("Event listener is not a function:",b),!1):(f.error("Unconfigured event:",a),!1):(f.error("Unrecognized event:",a),!1)},b.exports=m},{22:22,4:4,8:8}],11:[function(a,b,c){b.exports = 'NOFLEX'},{22:22,23:23}],12:[function(a,b,c){"use strict";var d=(a(3),a(19)),e=a(10),f=a(22),g=a(15),h=function(){function b(a,b){var c=!1;if(b=b||p,Array.isArray(a)&&(a.some(function(a){return a.key&&a.key.toLowerCase()==="rpfl_"+b?(c=a.values[0].match(/^([0-9]+)_(.*)$/)[2],Boolean(c)):void 0}),a.length>0&&!c))throw"targeting provided but tier could not be read";return c}function c(a,b){g.mark("fastlane.mapResponseToTier.start");for(var c,d={nPoints:0,oTier:{}},e=0;e<b.length;e++)c=h(a,b[e]),c>d.nPoints&&(d.nPoints=c,d.oTier=b[e]);return g.mark("fastlane.mapResponseToTier.complete"),g.measure("tierMapping","fastlane.mapResponseToTier.start","fastlane.mapResponseToTier.complete"),d}function h(a,b){var c=0,d=Math.round(100*a.cpm)/100;if(b.hasOwnProperty("floor")&&b.hasOwnProperty("ceiling")){if(!(d>=b.floor&&d<=b.ceiling))return 0;c+=u.nPrice,f.info("Price matched for tier: "+b.mapping+". Bounds: "+b.floor+" <= "+d+" <= "+b.ceiling+". Points: "+c+".")}if(b.hasDeals){var e=a.deal?parseInt(a.deal,10):!1;if(b.hasDeals!==!0||!e)return f.info("Deal did not match for tier: "+b.mapping+". Deal ID: "+e+"."),0;c+=u.nDealWildcard,f.info("Deal wildcard matched for tier: "+b.mapping+". Deal ID: "+e+". Points: "+c+".")}else if(b.deals){var g=a.deal?parseInt(a.deal,10):!1;if(!f.isArray(b.deals)||!f.inArray(g,b.deals))return f.info("Deal did not match for tier: "+b.mapping+". Deal ID: "+g+"."),0;c+=u.nDealExact,f.info("Deal matched for tier: "+b.mapping+". Deal ID: "+g+". Points: "+c+".")}if(b.primaryAccountIds){var h=q.getConfigValue(0,"accountId");if(!f.inArray(h,b.primaryAccountIds))return f.debug("Primary accountId did not match for tier:",b.mapping,", Primary account: ",h,", configured: ",b.primaryAccountIds),0;c+=u.nPrimaryAccount,f.debug("Primary accountId match for tier:",b.mapping,", Primary account: ",h,", configured: ",b.primaryAccountIds,", points:",c)}return c}function i(a,b,c,d,f){return function(h){g.mark("fastlane.run.auctionResponse"),g.measure("auctionRequest","fastlane.run.auctionRequest","fastlane.run.auctionResponse");for(var i=0;i<a.length;i++){var j=a[i],k=f||j.getRubiconSizeIds(p).join(",");c.bHasTimedout?e.factory("FL_RESPONSE_TIMEOUT",{nAccountId:p,sElementId:j.getElementId(),nSiteId:j.getSiteId(p),nZoneId:j.getZoneId(p),nSizeId:k,nTimeout:c.nTimeout,nRequestTime:h.requestTime,sRequestType:h.isJsonp?"jsonp":"xhr",nStatusCode:h.status,sStatus:h.statusText||"",sSlotName:j.getSlotName()}):e.factory("FL_RESPONSE_SUCCESS",{nAccountId:p,sElementId:j.getElementId(),nSiteId:j.getSiteId(p),nZoneId:j.getZoneId(p),nSizeId:k,nTimeout:c.nTimeout,nRequestTime:b.requestTime,sRequestType:h.isJsonp?"jsonp":"xhr",nStatusCode:h.status,sStatus:h.statusText||"",sSlotName:j.getSlotName()}),d.add(j.getPublicVersion())}w(a,h.responseText,c.bHasTimedout,b,f),g.mark("fastlane.run.responseParsed"),g.measure("responseParsed","fastlane.run.auctionResponse","fastlane.run.responseParsed")}}function j(a,b,c,d){return function(f){for(var g=0;g<a.length;g++){var h=a[g],i=d||h.getRubiconSizeIds(p).join(",");C(c.bHasTimedout,h,p,i),e.factory("FL_RESPONSE_FAILURE",{nAccountId:p,sElementId:h.getElementId(),nSiteId:h.getSiteId(p),nZoneId:h.getZoneId(p),nSizeId:i,nTimeout:c.nTimeout,nRequestTime:b.requestTime,sRequestType:f.isJsonp?"jsonp":"xhr",nStatusCode:f.status,sStatus:f.statusText||"",sSlotName:h.getSlotName()})}}}function k(){if("boolean"==typeof m)return m;var a=parseFloat(q.getConfigValue(o,"fastlane.pageSampling",1));return m=a>Math.random()}var l=this,m=null,n=0,o=0,p=null,q=a(8),r=a(13),s=[],t=[],u={nPrice:10,nDealWildcard:25,nDealExact:50,nPrimaryAccount:100},v=!f.browserSupportsXHR();l.init=function(a){if(o=a,s=q.getConfigValue(o,"tiers",s),p=q.getConfigValue(o,"accountId"),n=z(s),t=q.getConfigValue(o,"fastlane.optimizedHosts",["optimized-by.rubiconproject.com/a/api/fastlane.json"]).slice(),v)for(var b=0;b<t.length;b++)t[b]+="p"};var w=function(a,b,c,d,g){var h,i;void 0===c&&(c=!1);try{h="object"==typeof b?b:JSON.parse(b)}catch(j){return void a.forEach(function(a){var d=g||a.getRubiconSizeIds(p).join(",");e.factory("FL_RESPONSE_PARSE_ERROR",{sSlotName:a.getSlotName(),nSizeId:d,sRequestData:b}),C(c,a,p,d)})}if(!h||!h.ads||"object"!=typeof h.ads||f.isArray(h.ads)&&0===h.ads.length)return void a.forEach(function(a){D(c,a,p,g)});if(f.isArray(h.ads))return void x(h.ads[0],a[0],c,h,d,g);for(var k in h.ads)if(h.ads.hasOwnProperty(k)){var l=h.ads[k];if(f.isArray(l)&&0!==l.length)for(var m=0;m<l.length;m++)x(l[m],r.getSlot(k),c,h,d);else i=r.getSlot(k),D(c,i,p,g)}},x=function(a,d,g,h,i,j){if(j=parseInt(a.size_id||j,10),"no-ads"===a.status)return void D(g,d,p,j);var k=f.getABTestParam("aeMapping");if("on"===k&&(d.getSiteId(p)===h.site_id&&d.getZoneId(p)===h.zone_id||e.factory("FL_BAD_SLOT_MAPPING",{nAccountId:p,sElementId:d.getElementId(),nSiteId:d.getSiteId(p),nZoneId:d.getZoneId(p),nAeSiteId:h.site_id,nAeZoneId:h.zone_id})),"ok"!==a.status)return e.factory("FL_BAD_RESPONSE_STATUS",{sStatus:a.status,sReason:a.reason||a.error_reason}),void C(g,d,p,j);var l=parseFloat(f.getUrlSessionParam("rp_cpm_override"));l&&(e.factory("FL_AUCTION_CPM_OVERRIDE",{nOriginalCpm:a.cpm,nOverrideCpm:l}),a.cpm=l);var m=a.cpm;if(n>m)return f.warn("CPM is below the lowest floor for slot: "+d.getSlotName()+" using size: "+j+"."),void C(g,d,p,j);var o=f.getUrlSessionParam("rp_deal_override");if(o){var q=a.deal;a.deal=o,f.error("Overriding Auction Deal. Original: "+q+". Override: "+a.deal)}var r;try{k=f.getABTestParam("aeMapping"),"false"!==k&&(r=b(h.ads[0].targeting))}catch(t){f.warn("AE mapping tier: "+t)}if(k=f.getABTestParam("aeMapping"),!r||"on"===k){var u=r,v=c(a,s);r=v.nPoints?v.oTier.mapping:!1,u&&u!==r&&e.factory("FL_BAD_TIER_MAPPING",{nAccountId:p,sElementId:d.getElementId(),sTier:r,nZoneId:d.getZoneId(p),nAeSiteId:h.site_id,nAeZoneId:h.zone_id})}
var w=f.getUrlSessionParam("rp_tier_override");w&&(f.error("Overriding Auction Tier. Original: "+r+". Override: "+w),r=w),r!==!1?(d.storeCreative(h.account_id,j,a,a.impression_id,r,i),e.factory("FL_TIER_MAPPED",{nAccountId:p,sElementId:d.getElementId(),nSiteId:d.getSiteId(p),nZoneId:d.getZoneId(p),bResponseTimedOut:g?1:0,nSizeId:j,sTier:r,nCpm:m})):e.factory("FL_TIER_NOT_MAPPED",{sSlotName:d.getSlotName(),sElementId:d.getElementId(),nAccountId:p,nSiteId:d.getSiteId(p),nZoneId:d.getZoneId(p),bResponseTimedOut:g?1:0,nSizeId:j,nPrice:m})};l.run=function(b,c){if("function"!=typeof b)throw new Error("first argument to 'run' must be a callback function");if(!k())return f.warn("fastlane#run call cancelled due to pageSampling"),void b([]);f.setTimestamp("nRunTimestamp"),g.mark("fastlane.run"),e.factory("FL_RUN",{nLatency:Number(new Date)-f.getDataStoreValue("nInitTimestamp")}),f.setSizesFilteredByAccountRules(r,q);var h="";f.getIntegration()||(h="plain",q.getConfigValue(0,"configuration.exposeRawResponses",!1)&&(h="custom"),f.usesFastlaneExpress()&&(h="flex"),f.setIntegration(h));var m=new d,s={bHasTimedout:!1,nTimeout:c.nTimeout||2e3},u=a(5),w=new u({nConfigIndex:o,oTimeout:s,nLowestTierFloor:n,oFinishedSlots:m,fSuccessResponse:i,fFailedResponse:j,aBaseUrls:t,bUseJsonp:v});s.oTimeout=setTimeout(function(){f.info("fastlane:"," timeout after "+s.nTimeout+" ms. "+w.getSuccessfulRequests()+"/"+w.totalRequests()+" requests finished successfully before timeout"),s.bHasTimedout=!0,b(m.toArray())},s.nTimeout);var x,z=q.getConfigValue(0,"configuration.maximumRequestsPerPage",100),C=q.getConfigValue(0,"configuration.maximumSizesPerSlot",10),D=q.getConfigValue(0,"configuration.cacheResponses",!1),F=q.getConfigValue(0,"configuration.useMultiSize",!1),G=f.isSingleRequest(),H=f.getNow();if(G||F){G?f.debug("Using SRA Request"):F&&f.debug("Using MAS Requests");for(var I=0;I<c.aSlots.length;I++){x=c.aSlots[I];var J=x.getRubiconSizeIds(p);if(J&&0!==J.length){if(!G&&w.totalRequests()>=z){e.factory("FL_EXCEEDED_REQUESTS_PER_PAGE",{nLimit:z});break}for(var K=0;K<=J.length;K++)y(x,J[K],p,H,D);if(x.hasValidSiteZoneId(p))if(E(x,p,J.join(",")),G)w.addSlot(x);else{var L=A(J);w.addSlot(x,L.primarySizeId,L.secondarySizeIds)}else f.error("Invalid site or zone id. elementId:",x.getElementId(),"site:",x.getSiteId(p),"zone:",x.getZoneId(p))}else f.warn("slot has no sizes, skipping:",x.getElementId())}}else{f.debug("Not using SRA or MAS requests");for(var M=B(c.aSlots),N={},O=0;O<M.length;O++){x=M[O].slot;var P=x.getElementId(),Q=M[O].size;if(Q){if(N[P]=N[P]||0,w.totalRequests()>=z){e.factory("FL_EXCEEDED_REQUESTS_PER_PAGE",{nLimit:z});break}N[P]>C||(N[P]!==C?y(x,Q,p,H,D)||(x.isAdEngineMapped(p)||x.hasValidSiteZoneId(p)?(E(x,p,Q),w.addSlot(x,Q),N[P]++):f.error("Invalid site or zone id for single ad size request. elementId:",x.getElementId(),"site:",x.getSiteId(p),"zone:",x.getZoneId(p))):(e.factory("FL_EXCEEDED_REQUESTS_PER_SLOT",{sSlotName:x.getSlotName(),nLimit:C}),N[P]++))}else f.warn("Missing slot size. elementId:",P)}}w.finishAuction(),w.finished(function(){s.bHasTimedout||(f.info("fastlane:",w.getSuccessfulRequests()+"/"+w.totalRequests()+" requests finished successfully before timeout ("+s.nTimeout+" ms)"),clearTimeout(s.oTimeout),b(m.toArray()))}),setTimeout(l.purgeExpiredCreatives,3e5)};var y=function(a,b,c,d,f){var g=a.getCreative(c,b);if(null!==g)if(g.nExpires<=d)r.purgeCreative(g.sImpressionId);else if(f){if(f)return e.factory("FL_CREATIVE_CACHED",{sSlotName:a.getSlotName(),nAccountId:c,nSiteId:a.getSiteId(c),nZoneId:a.getZoneId(c),nSizeId:b}),!0}else a.purgeCreative(c,b);return!1};l.purgeExpiredCreatives=function(){for(var a=f.getNow(),b=r.getCreatives(),c=0;c<b.length;c++){var d=b[c];d&&d.nExpires<=a&&r.purgeCreative(d.sImpressionId)}};var z=function(a){return a.length?a.reduce(function(a,b){return Math.min(a,parseFloat(b.floor))},1/0):0},A=function(a){if(!a||0===a.length)return!1;var b,c;return a=a.slice(),a=a.sort(function(a,b){return a-b}),b=a.indexOf(15)>=0?15:a.indexOf(2)>=0?2:a.indexOf(9)>=0?9:a[0],c=a.filter(function(a){return a!==b}),{primarySizeId:b,secondarySizeIds:c}},B=function(a){for(var b,c,d=[],e=0;e<a.length;e++)c=a[e],b=(c.getRubiconSizeIds(p)||[]).slice(),d.push({slot:c,sizes:b});var f=[];for(e=0;d.length;)c=d[e].slot,b=d[e].sizes,c&&b.length&&f.push({slot:c,size:b.shift()}),b.length||d.splice(e--,1),++e>=d.length&&(e=0);return f},C=function(a,b,c,d){var f={bResponseTimedOut:a?1:0,nSiteId:b.getSiteId(c),nZoneId:b.getZoneId(c),sSlotName:b.getSlotName(),sElementId:b.getElementId(),nAccountId:c,nSizeId:d||b.getRubiconSizeIds(c).join(",")};e.factory("FL_RESPONSE_UNFIT",f)},D=function(a,b,c,d){d=d||b.getRubiconSizeIds(c).join(","),e.factory("FL_NO_ADS",{sSlotName:b.getSlotName(),nSizeId:d}),C(a,b,c,d)},E=function(a,b,c){e.factory("FL_SLOT_AUCTION",{sSlotName:a.getSlotName(),nAccountId:b,nSiteId:a.getSiteId(b),nZoneId:a.getZoneId(b),nSizeId:c,sElementId:a.getElementId()})}};b.exports=h},{10:10,13:13,15:15,19:19,22:22,3:3,5:5,8:8}],13:[function(a,b,c){"use strict";var d=a(23),e=a(20),f=a(12),g=a(8),h=a(9),i=a(22),j=a(10),k=(a(4),a(18)),l=a(6),m=a(19),n=function(){var b,c=this,n=a(15),o=null,p=null,q=null,r=null,s=!1,t={},u={},v={},w=new h,x=!1,y=[],z=new m,A=1e3,B=300,C='<!doctype html>\n\n<html lang="en"><head><meta charset="utf-8"><title></title><script type="text/javascript">var inDapIF = true;</script></head><body style="margin: 0px; padding: 0px;"><script type="text/javascript">',D="</script></body></html>";c.loadConfiguration=function(a){x||g.addConfig(a)},c.init=function(){if(!x){x=!0,i.setTimestamp("nInitTimestamp"),n.mark("highlander.init"),c.writeDnsPrefetchElements();var a=g.getConfigValue(0,"sizeMap",!1);a&&(i.oSizeMap=a,i.mergeVideoSizes()),y=o(),d.origrubicontag&&d.origrubicontag.cmd&&i.isArray(d.origrubicontag.cmd)&&c.processCommands(d.origrubicontag.cmd),j.factory("HL_INIT",{nAccountId:g.getConfigValue(0,"accountId"),sVersion:g.getConfigValue(0,"configuration.version")})}};var E=function(){s=!0,d.addEventListener&&d.addEventListener("message",function(a){var b=a.data;b&&b.rp_get_impression_info&&F(b.rp_get_impression_info)},!1)},F=function(a){var b=H(a);if(null!==b&&b.hasOwnProperty("DOM_IFRAME")){var c=b.DOM_IFRAME;delete b.DOM_IFRAME;var d=JSON.stringify(b);return c.setAttribute("data-rp-mfl-impression-info",d),G(a),c}};c.writeDnsPrefetchElements=function(){var a=d.document.createElement("link");a.rel="dns-prefetch",a.href="//optimized-by.rubiconproject.com/";var b=d.document.getElementsByTagName("script")[0];b&&b.parentNode.appendChild(a)},o=function(){for(var a=[],b=g.getConfigs(),c=0;c<b.length;c++)for(var d=g.getConfigValue(c,"services",[]),e=0;e<d.length;e++){var h=d[e];if("fastlane"===h){var i=new f;i.init(c),a.push(i)}}return a},c.run=function(a,b){j.factory("HL_RUN_CALLED",{nAccountId:g.getConfigValue(0,"accountId")}),"function"!=typeof a&&(i.error("Missing or invalid callback provided to rubicontag.run(). Overiding with empty function."),a=function(){});var c=p(b);k.run(y,a,c)},p=function(a){if(a=a||{},a&&i.isInteger(a)){var b=a;a={timeout:b}}var d=!!a.slots,e={nTimeout:a.timeout?a.timeout:g.getConfigValue(0,"configuration.timeout",A),aSlots:a.slots?a.slots:!1,bSlotsSpecified:d};e.nTimeout<B&&(j.factory("HL_BAD_TIMEOUT",{nTimeout:e.nTimeout}),e.nTimeout=B);var f=[];if(e.bSlotsSpecified){if(i.isArray(e.aSlots))for(var h=0;h<e.aSlots.length;h++)if(e.aSlots[h]&&"function"==typeof e.aSlots[h].getElementId){var k=c.getSlot(e.aSlots[h].getElementId());k&&f.push(k)}}else f=c.getAllSlots();return e.aSlots=f,e},c.processCommands=function(a){for(var b=0;b<a.length;b++)a[b]()},r=function(a){var b=a.oVisitor||{},c=a.aKeywords||[],d=a.aContexts||[],f=a.oInventory||{},g=a.sName||null,h=a.aSizes||[],i=a.sId||null,j=a.sType||"display",k=new e(g,h,i,j);a.sPosition&&k.setPosition(a.sPosition);for(var l in b)b.hasOwnProperty(l)&&k.addFPV(l,b[l]);for(var m in f)f.hasOwnProperty(m)&&k.addFPI(m,f[m]);return k.addContext.apply(k,d),k.addKW(c),"video"===j&&(k.setLanguage(a.sLanguage||"en"),k.setPlayerSize(a.nWidth||0,a.nHeight||0)),k},c.defineSlot=function(a,b,d){if(1===arguments.length&&i.isObject(a))return q(a);if(arguments.length<3)return j.factory("HL_BAD_DEFINE_SLOT",{sSlotName:a,aDimensions:b,sElementId:d}),r({sId:d,sName:a,aSizes:b});var e=c.getSlot(d);return e?e:(t[d]=r({sId:d,sName:a,aSizes:b}),t[d])},q=function(a){if(!i.isObject(a)||!i.isArray(a.sizes)||!a.id)return j.factory("HL_BAD_DEFINE_SLOT_FROM_OBJ",{aSizes:a.sizes,nSiteId:a.siteId,nZoneId:a.zoneId,nId:a.id}),r({sId:a.id,sName:a.id});var b=c.getSlot(a.id);if(b)return b;a.url&&i.setUrl(a.url),Array.isArray(a.pageContexts)&&c.addContext.apply(c,a.pageContexts),b=r({sId:a.id,oVisitor:a.visitor,sPosition:a.position,aContexts:a.slotContexts,aKeywords:a.keywords,oInventory:a.inventory,sName:a.name||a.id,aSizes:i.normalizeDimensions(a.sizes),sType:a.type,sLanguage:a.language||"en",nHeight:a.playerHeight||0,nWidth:a.playerWidth||0});var d,e=g.getConfigValue(0,"accountId"),f=!1;a.siteId&&a.zoneId?d={siteId:a.siteId,zoneId:a.zoneId}:f=!0,b.loadSlotConfiguration(e,d,f);var h=a.secondaryAccounts;if(h&&i.isObject(h)){var k=g.getConfigValue(0,"configuration.secondaryAccountIds");for(var l in h)if(h.hasOwnProperty(l)){if(!i.inArray(l,k)){i.error("Error: configuring slot with invalid secondary accountId:",l);continue}var m=h[l];if(d=null,f=!1,m.siteId&&m.zoneId?d={siteId:m.siteId,zoneId:m.zoneId}:f=!0,m.sizes){d=d||{};var n=i.convertDimensionsListToSizeIds(h[l].sizes);n&&n.length&&(d.sizes=n)}b.loadSlotConfiguration(l,d,f)}}return t[a.id]=b,b},c.getAllSlots=function(){var a=[];for(var b in t)t.hasOwnProperty(b)&&a.push(t[b]);return a},c.getSlot=function(a){return t.hasOwnProperty(a)?t[a]:!1},c.setTargetingForGPTSlot=function(a){if(!(a&&i.isObject(a)&&i.isFunction(a.getSlotElementId)&&i.isFunction(a.setTargeting)))return!1;var b=c.getSlot(a.getSlotElementId());return b&&i.isObject(b)&&i.isFunction(b.getAdServerTargeting)?b.setTargetingForGPTSlot(a):!1},c.renderCreative=function(a){var d,e,f;if(n.mark("highlander.renderCreative"),arguments.length>1&&(a={parentNode:arguments[0],elementId:arguments[1],sizeId:null,accountId:arguments[3]||0},arguments[2]&&(f=arguments[2].match&&arguments[2].match(/^([0-9]+)_.+$/),i.isArray(f)&&2===f.length?a.sizeId=f[1]:a.sizeId=arguments[2])),a.sizeId||a.accountId){if(a.accountId||(a.accountId=g.getConfigValue(0,"accountId")),e=c.getSlot(a.elementId),e===!1)return void j.factory("HL_CREATIVE_RENDER_SLOT_NOT_FOUND",{sElementId:a.elementId,nSizeId:a.sizeId,nAccountId:a.accountId});d=e.getCreative(a.accountId,a.sizeId),a.auctionId=d&&d.sImpressionId}else a.auctionId||(a.auctionId=a.elementId),d=c.getCreative(a.auctionId),d&&(a.sizeId=d.nSizeId,a.accountId=d.nAccountId,e=d.oSlot);if(null===d)return void j.factory("HL_CREATIVE_RENDER_CREATIVE_NOT_FOUND",{sElementId:a.elementId,nSizeId:a.sizeId,nAccountId:a.accountId});c.purgeCreative(a.auctionId),j.factory("HL_CREATIVE_RENDERED",{nAccountId:a.accountId,sElementId:a.elementId,nSiteId:e.getSiteId(a.accountId),nZoneId:e.getZoneId(a.accountId),nSizeId:a.sizeId,sTier:d.sTier,nCpm:d.oResponse.cpm,sAuctionId:a.auctionId,sSlotName:e.getSlotName(),nCreativeId:d.oResponse.creative_id,nAdId:d.oResponse.ad_id,nAdvertiserId:d.oResponse.advertiser,nNetworkId:d.oResponse.network,sAqId:d.oResponse.aqid||""});var h=i.getProtocol()+"stats.aws.rubiconproject.com/stats/fastlaneimps/"+d.sImpressionId+"/a"+d.nAccountId+"/s"+d.oSlot.getSiteId(d.nAccountId)+"/z"+d.oSlot.getZoneId(d.nAccountId)+"/d/"+Math.round(1e15*Math.random());(new Image).src=h,c.writeContentToFriendlyIFrame({oContainer:a.parentNode,sContent:d.oResponse.script,sId:["rpfl",a.accountId,e.getSlotName().replace(/[^a-zA-Z0-9]/g,"_"),a.sizeId].join("_"),nSizeId:a.sizeId,sImpressionId:a.auctionId,aClickTrackingUrls:a.clickTrackingUrls,oClickTrackingMacroData:{siteId:e.getSiteId(a.accountId),zoneId:e.getZoneId(a.accountId),sizeId:a.sizeId,userId:b}})},c.writeContentToFriendlyIFrame=function(a){try{a.sId=a.sId?a.sId:"rp_ct_"+Math.round(1e15*Math.random());var b=d.document.createElement("iframe");b.setAttribute("scrolling","no"),b.src="about:blank";var c=i.convertSizeIdToDimensions(a.nSizeId);if(b.style.cssText="width: "+c[0]+"px; height: "+c[1]+"px; border: 0; margin: 0; padding: 0; overflow: hidden;",b.id=a.sId,b.className="rp-creative-iframe-wrapper",i.isArray(a.aClickTrackingUrls)&&a.aClickTrackingUrls.length){new l(b,a.aClickTrackingUrls,a.oClickTrackingMacroData)}v.hasOwnProperty(a.sImpressionId)?(b.setAttribute("data-rp-mfl-impression-id",a.sImpressionId),J(b,a.sImpressionId)):b.setAttribute("data-rp-impression-id",a.sImpressionId),a.oContainer.appendChild(b);var e=b.contentWindow.document;e.open(),e.write(C+a.sContent+D),e.close(),n.mark("highlander.writeContentToFriendlyIFrame.complete"),n.measure("renderCreative","highlander.renderCreative","highlander.writeContentToFriendlyIFrame.complete")}catch(f){i.error(f)}},c.storeCreative=function(a,b,c,d,e,f,h){var j=i.getNow()+g.getConfigValue(0,"configuration.creativeTTL",18e4);u[a]={oResponse:b,nExpires:j,nAccountId:c,nSizeId:d,sTier:e,oSlot:f,sImpressionId:a},b.hasOwnProperty("vantage")&&(s||E(),I(u[a],h))},c.getCreative=function(a){return u.hasOwnProperty(a)?u[a]:null},c.getCreatives=function(){var a=[];for(var b in u)u.hasOwnProperty(b)&&a.push(u[b]);return a},c.purgeCreative=function(a){var b=null;return u.hasOwnProperty(a)&&(b=u[a],b.oSlot.purgeCreative(b.nAccountId,b.nSizeId),delete u[a]),b};var G=function(a){v.hasOwnProperty(a)&&delete v[a]},H=function(a){var b=null;return v.hasOwnProperty(a)&&(b=v[a]),b},I=function(a,b){var c=a.oSlot,d=b.nRequestTime,e={account_id:a.nAccountId,site_id:c.getSiteId(a.nAccountId),zone_id:c.getZoneId(a.nAccountId),size_id:a.nSizeId,ad_id:a.oResponse.ad_id,advertiser_id:a.oResponse.advertiser,creative_id:a.oResponse.creative_id,cpm:a.oResponse.cpm,network_id:a.oResponse.network,loadTime:d,url:b.getUrl()};for(var f in a.oResponse.vantage)a.oResponse.vantage.hasOwnProperty(f)&&(e[f]=a.oResponse.vantage[f]);return v[a.sImpressionId]=e,e},J=function(a,b){v.hasOwnProperty(b)&&(v[b].DOM_IFRAME=a)};c.setUserKey=function(a){return b=a,c},c.getUserKey=function(){return b},c.setFPI=function(a,b){return w.setFPI(a,b),c},c.addFPI=function(a,b){return w.addFPI(a,b),c},c.getFPI=function(){return w.getFPI()},c.setFPV=function(a,b){return w.setFPV(a,b),c},c.addFPV=function(a,b){return w.addFPV(a,b),c},c.getFPV=function(){return w.getFPV()},c.addKW=function(a){return w.addKW(a),c},c.getKWs=function(){return w.getKWs()},c.addContext=function(){for(var a=0;a<arguments.length;a++)z.add(arguments[a]);return c},c.getContexts=function(){return z.toArray()},c.setUrl=i.setUrl,c.setIntegration=function(a){var b={};return i.setIntegration(a),i.inArray(a,["pbjs","rppb"])&&(b.pbjsRubiconTargeting=g.getConfigValue(0,"fastlane.pbjsRubiconTargeting",!1)),b},c.findBestMatchForConfig=function(a,b){if(!a)return!1;b=b||0;var d={};if(a.getSlotName?(d.slotName=a.getSlotName(),d.elementId=a.getElementId(),d.position=a.getPosition(),d.slotContexts=a.getContexts(),d.type=a.getSlotType()):d=a,"video"===d.type)return!1;n.mark("highlander.findBestMatchForConfig");var e=d.elementId,f="    ["+e+"] ",h="  ["+e+"] ",j="["+e+"] ",k=g.getConfigValue(b,"slots",[]);d.contexts=c.getContexts();var l={nPoints:0,oConfig:!1};i.warn(j,"Finding best slot config entry for slot name: "+d.slotName+", contexts: "+(d.contexts.toString()||"(none)")+".");for(var m=0;m<k.length;m++){var o=k[m];i.debug(f,"Starting slot specificity calculation for config: ",o);var p=K(d,o);p>0?i.info(h,"Found matching config entry. Points: "+p+", Config: ",o):i.debug(f,"Config did not match: ",o),p>l.nPoints&&(l.nPoints=p,l.oConfig=o)}return l.nPoints>0?i.warn(j,"Winning slot config entry found. Points: "+l.nPoints+", Config: ",l.oConfig):(i.warn(j,"No winning slot config entry found: "+d.slotName+", contexts: "+(z.toString()||"(none)")+", Points: "+l.nPoints+"."),0===b?(i.warn(j,"Using catch-all"),l.oConfig=g.getConfigValue(0,"catchAll")):i.warn(j," skipping catch-all because this is a secondary account:",g.getConfigValue(m,"accountId"))),n.mark("highlander.findBestMatchForConfig.complete"),n.measure("findBestMatchForConfig","highlander.findBestMatchForConfig","highlander.findBestMatchForConfig.complete"),l.oConfig};var K=function(a,b){b=b||{},a=a||{};var c=a.slotName,d=a.elementId,e=(a.position,a.contexts),f=a.slotContexts,h=null,j=0,k="    ["+d+"] ";if(b.slotId)if(h=new RegExp(b.slotId),b.slotId===c)j+=i.oSlotConfigurationPointSystem.nSlotIdExact,i.debug(k,"Exact slot name match. slot name: "+c+", pattern: "+b.slotId+", points: "+j+".");else{if(!h.test(c))return i.debug(k,"Slot name match failed. Slot name: "+c+", pattern: "+b.slotId+", Skipping."),0;j+=i.oSlotConfigurationPointSystem.nSlotIdPattern,i.debug(k,"Partial slot name match. slot name: "+c+", pattern: "+b.slotId+", points: "+j+".")}if(b.elementIdPattern)if(h=new RegExp(b.elementIdPattern),b.elementIdPattern===d)j+=i.oSlotConfigurationPointSystem.nElementIdExact,i.debug(k,"Exact element ID match.pattern: "+b.elementIdPattern+", points: "+j+".");else{if(!h.test(d))return i.debug(k,"Element Id match failed.pattern: "+b.elementIdPattern+". Skipping."),0;j+=i.oSlotConfigurationPointSystem.nElementIdPattern,i.debug(k,"Partial element ID match.pattern: "+b.elementIdPattern+", points: "+j+".")}if(b.position){if(b.position!==a.position)return i.debug(k,"Position match failed. Slot position: "+a.position+", configured: "+b.position+". Skipping."),0;j+=i.oSlotConfigurationPointSystem.nPosition,i.debug(k,"Position match. Position: "+b.position+", points: "+j+".")}if(b.deviceType){var l=i.getPointCalculationDeviceType(b.deviceType,k);if(0===l)return 0;j+=l}if(b.urlPattern){var m=i.getPointCalculationUrl(b.urlPattern,k);if(0===m)return 0;j+=m}if(b.contextKeywords){var n=i.getPointCalculationContextKeywords(b.contextKeywords,e,f,k);if(0===n)return 0;j+=n}if(b.primaryAccountIds){var o=g.getConfigValue(0,"accountId");if(!i.inArray(o,b.primaryAccountIds))return i.debug(k,"Primary accountId match failed. Primary account: ",o,", configured: ",b.primaryAccountIds,", Skipping"),0;j+=i.oSlotConfigurationPointSystem.nPrimaryAccount,i.debug(k,"Primary accountId match. Primary account: ",o,", configured: ",b.primaryAccountIds,", points:",j)}return j}};b.exports=new n},{10:10,12:12,15:15,18:18,19:19,20:20,22:22,23:23,4:4,6:6,8:8,9:9}],14:[function(a,b,c){"use strict";var d=a(22),e=a(23),f=function(a){d.debug("creating jsonp request object with callback:",a);var b,c,f,g,h=this,i=!1,j=null,k=null,l=null,m=null,n=null,o=null,p=null;h.readyState=0,h.status=0,h.statusText="",h.responseText="",h.timeout=0,h.onreadystatechange=function(){d.debug('jsonp "onreadystatechange" function called for request:',h,", url:",b)},h.isJsonp=!0,h.jsonpArgs=[],h.open=function(a,c){b=c},h.send=function(){return i?void d.warn('"send" called multiple times for jsonp request:',b):(i=!0,b?a?(d.debug("sending jsonp request:",b),j(),n(),void(h.timeout&&(g=setTimeout(o,h.timeout)))):(d.error("no callback given for jsonp request"),void p(0,"jsonp: no callback")):(d.error("no url given for jsonp request"),void p(0,"jsonp: no url")))},h.abort=function(){p(0,"jsonp aborted")},j=function(){var b=k().contentWindow;b[a]=m};var q=function(){if(f&&f.contentWindow)try{delete f.contentWindow[a]}catch(b){f.contentWindow[a]=void 0}};k=function(){for(var b=e.rp_fl_iframes=e.rp_fl_iframes||[],c=0;c<b.length;c++)if(!b[c].contentWindow[a]){f=b[c];break}return f||(f=l(),b.push(f)),f},l=function(){var a="rp_fl_iframe_"+parseInt(1e8*Math.random(),10),b=d.createInvisibleIframe(a),c=document.getElementsByTagName("head")[0];c.insertBefore(b,c.firstChild);var e='<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"><html><head><base target="_top" /><script>inDapIF=true;</script></head><body></body></html>',f=b.contentWindow.document;return f.open(),f.write(e),f.close(),b},m=function(){for(var a=0;a<arguments.length;a++)h.jsonpArgs.push(arguments[a]);var b=arguments.length>0?arguments[0]:"";p(200,"success",b)},n=function(){var a=f.contentWindow.document;c=a.createElement("script");var d=a.getElementsByTagName("script")[0];c.async=1,c.src=b,d.parentNode.insertBefore(c,d)},o=function(){p(0,"jsonp timeout")},p=function(a,e,f){4!==h.readyState&&(200===a?d.info("jsonp request finished successfully:",b,"arguments: ",h.jsonpArgs):d.warn(e,": closing jsonp request:",b),h.readyState=4,h.status=a,h.statusText=e||"",h.responseText=f||"",clearTimeout(g),q(),c&&c.parentNode&&c.parentNode.removeChild(c),"function"==typeof h.onreadystatechange&&h.onreadystatechange())}};b.exports=f},{22:22,23:23}],15:[function(a,b,c){"use strict";var d=a(23),e=a(22),f=d&&d.performance&&d.performance.mark&&d.performance.measure,g={mark:function(){},measure:function(){}};f&&1===parseInt(e.getUrlSessionParam("rp_performance"),10)&&(g=d.performance,g.mark("highlander.loaded")),b.exports=g},{22:22,23:23}],16:[function(a,b,c){"use strict";var d=a(19),e=a(22),f=function(a){var b,c=this,f=new d,g=new d,h=new d,i=new d,j=!1,k=!1,l=[],m=null,n=null;c.setTimeout=function(a){b=setTimeout(function(){e.warn("RequestManager:","timeout (after "+a+"ms)"),c.abort()},a)},a&&c.setTimeout(a),c.addRequest=function(a){return f.contains(a)||g.contains(a)?!0:j?!1:f.add(a)?(a.always(function(b){m(a,b)}),k&&a.abort(),!0):!1},m=function(a,b){return f.remove(a)&&g.add(a)?(200===b.status?h.add(a):i.add(a),n(),!0):!1},c.allRequestsAdded=function(){j=!0,n()},c.allRequestsFinished=function(){return!(!j||c.haveOpenRequests())},c.haveOpenRequests=function(){return!f.isEmpty()},c.finished=function(a){return"function"==typeof a?(l.push(a),!0):!1};var o=function(){for(;l.length;)l.shift()();l={length:0,push:function(a){a()}}};n=function(){c.allRequestsFinished()&&(clearTimeout(b),o())},c.abort=function(){e.warn("RequestManager:","aborting "+f.length()+" open request(s)");for(var a=f.toArray(),b=0;b<a.length;b++)a[b].abort();k=!0,o()},c.getOpenRequests=function(){return f.toArray()},c.getClosedRequests=function(){return g.toArray()},c.totalRequests=function(){return f.length()+g.length()},c.getSuccessfulRequests=function(){return h.toArray()},c.getFailedRequests=function(){return i.toArray()}};b.exports=f},{19:19,22:22}],17:[function(a,b,c){"use strict";var d=a(13),e=a(7),f=a(10),g=(a(8),function(){var a=this;a.loadConfiguration=function(){return d.loadConfiguration.apply(a,arguments),a},a.init=function(){return d.init.apply(a,arguments),a},a.run=function(){return d.run.apply(a,arguments),a},a.cmd=e,a.getSlot=function(){var b=d.getSlot.apply(a,arguments);return b===!1?null:b.getPublicVersion()},a.defineSlot=function(){return d.defineSlot.apply(a,arguments).getPublicVersion()},a.getAllSlots=function(){for(var b=d.getAllSlots.apply(a,arguments),c=[],e=0;e<b.length;e++)c.push(b[e].getPublicVersion());return c},a.setUserKey=function(){return d.setUserKey.apply(a,arguments),a},a.setFPI=function(){return d.setFPI.apply(a,arguments),a},a.addFPI=function(){return d.addFPI.apply(a,arguments),a},a.setFPV=function(){return d.setFPV.apply(a,arguments),a},a.addFPV=function(){return d.addFPV.apply(a,arguments),a},a.addKW=function(){return d.addKW.apply(a,arguments),a},a.addContext=function(){return d.addContext.apply(a,arguments),a},a.renderCreative=function(){d.renderCreative.apply(a,arguments)},a.addEventListener=function(){return f.addEventListener.apply(a,arguments)},a.setTargetingForGPTSlot=function(){d.setTargetingForGPTSlot.apply(a,arguments)},a.setUrl=function(){d.setUrl.apply(a,arguments)},a.setIntegration=function(){return d.setIntegration.apply(a,arguments)},a.findBestMatchForConfig=function(){return d.findBestMatchForConfig.apply(a,arguments)}});b.exports=g},{10:10,13:13,7:7,8:8}],18:[function(a,b,c){"use strict";var d=(a(4),a(10)),e=a(15),f=function(){var a=this,b=[],c=0,f=function(){},g=null,h=!1,i={},j=null,k=null;a.execute=function(a,l,m){b=a,i=m,c=0,h=!1,f=l,g=setTimeout(function(){k()},i.nTimeout);var n=Number(new Date);e.mark("runner.execute.slotMapping");for(var o=0;o<i.aSlots.length;o++)i.aSlots[o].configure();var p=Number(new Date),q=p-n;d.factory("SLOT_MAPPING_PERFORMANCE",{nTotalTime:q,nAverageTime:Math.round(q/(i.aSlots.length||1))}),e.mark("runner.execute.slotMappingComplete"),e.measure("slotMapping","runner.execute.slotMapping","runner.execute.slotMappingComplete");for(var r=0;r<b.length;r++)b[r].run(j,i)},j=function(a){c++,c>=b.length&&k()},k=function(){h||(h=!0,clearTimeout(g),f(i))}};f.run=function(a,b,c){var d=new f;return d.execute(a,b,c),d},b.exports=f},{10:10,15:15,4:4}],19:[function(a,b,c){"use strict";var d=function(){var a=this,b=[];a.add=function(c){return a.contains(c)?!1:(b.push(c),!0)},a.remove=function(a){for(var c=0;c<b.length;c++)if(b[c]===a)return b.splice(c,1),!0;return!1},a.removeByIndex=function(a){return a<b.length&&a>=0?(b.splice(a,1),!0):!1},a.contains=function(a){for(var c=0;c<b.length;c++)if(b[c]===a)return!0;return!1},a.isEmpty=function(){return 0===b.length},a.length=function(){return b.length},a.get=function(a){return b[a]},a.toArray=function(){return b.slice(0)}};b.exports=d},{}],20:[function(a,b,c){"use strict";function d(a){if(void 0!==e)return e[a];e={};for(var b=0;b<k.getConfigs().length;b++){var c=k.getConfigValue(b,"accountId"),d=k.getConfigValue(b,"whitelistedSizes",{});e[c]=d}return e[a]}var e,f=a(23),g=a(9),h=a(19),i=a(22),j=a(10),k=a(8),l=a(15),m=function(a){var b=this,c=a;b.setFPI=function(){return c.setFPI.apply(b,arguments),b},b.addFPI=function(){return c.addFPI.apply(b,arguments),b},b.setFPV=function(){return c.setFPV.apply(b,arguments),b},b.addFPV=function(){return c.addFPV.apply(b,arguments),b},b.addKW=function(){return c.addKW.apply(b,arguments),b},b.setPosition=function(){return c.setPosition.apply(b,arguments),b},b.clearTargeting=function(){return c.clearTargeting.apply(b,arguments),b},b.addContext=function(){return c.addContext.apply(b,arguments),b},b.getInfo=c.getInfo,b.getElementId=c.getElementId,b.getSlotName=c.getSlotName,b.getSlotType=c.getSlotType,b.getAdServerTargeting=c.getAdServerTargeting,b.getAdServerTargetingByKey=c.getAdServerTargetingByKey,b.getRawResponses=c.getRawResponses,b.getRawResponseBySize=c.getRawResponseBySize,b.getRawResponseBySizeId=c.getRawResponseBySizeId,b.isConfigured=c.isConfigured},n=function(b,c,e,n){var o=this,p=null,q=null,r=!1,s=null,t=new h,u="  ["+e+"] ",v="["+e+"] ",w="["+e+"] ",x=new g,y=a(13),z={},A={},B={sElementId:null,sSlotName:null,sPos:"btf",oAccountConfigs:{},aBaseDimensions:[],aBaseRubiconSizeIds:[]},C=0,D=["display","video"];n&&i.inArray(n,D)||(n="display"),o.init=function(a,b,c,d){B.sSlotName=a,B.sElementId=c;var e=i.cleanseDimensionsList(b);o.addAdServerTargeting("rpfl_elemid",c),B.aBaseDimensions=e,B.aBaseRubiconSizeIds=[];for(var f=0;f<e.length;f++){var g=i.convertDimensionsToSizeId(e[f]);g===!1||i.inArray(g,B.aBaseRubiconSizeIds)?j.factory("SLOT_SIZE_NOT_MAPPED",{sDimensions:e[f].toString(),sSlotName:o.getSlotName()}):B.aBaseRubiconSizeIds.push(g)}"video"===d&&i.setHasVideoSlot()},o.getInfo=function(){var a=B.oAccountConfigs,b=o.getElementId(),c=o.getSlotName(),d=o.getPosition(),e=o.getKWs(),f=o.getFPI(),g=o.getFPV(),h={},j={},k={};for(var l in a)if(a.hasOwnProperty(l)){var m=[],n=[],p="rpfl_"+l,q=o.getSiteId(l),r=o.getZoneId(l),s=o.getRubiconSizeIds(l);A.hasOwnProperty(p)&&(n=A[p].toArray());for(var t=0;t<s.length;t++){var u=s[t],v=i.convertSizeIdToDimensions(u);m.push({w:v[0],h:v[1]})}k[l]={siteId:q,zoneId:r,sizes:s,targeting:n,dimensions:m}}for(var w=0;w<f.length;w++){var x=f[w].key,y=f[w].value;h[x]=y}for(var z=0;z<g.length;z++){var C=g[z].key,D=g[z].value;j[C]=D}return{id:b,name:c,position:d,keywords:e,inventory:h,visitor:j,accounts:k}},o.clearTargeting=function(){return x=new g,B.sPos="btf",o},o.isConfigured=function(){return r},o.isAdEngineMapped=function(a){if(B.oAccountConfigs.hasOwnProperty(a)){var b=B.oAccountConfigs[a];return b.bAdEngineMapped?b.bAdEngineMapped:!1}return!1},o.hasValidSiteZoneId=function(a){var b=!0,c=o.getSiteId(a),d=o.getZoneId(a),e=/^\d{1,15}$/;return c&&e.test(c)&&d&&e.test(d)||(b=!1),b},o.setFPI=function(a,b){return x.setFPI(a,b),o},o.addFPI=function(a,b){return x.addFPI(a,b),o},o.getFPI=function(a){return arguments.length<1&&(a=!0),s("getFPI",a)},o.setFPV=function(a,b){return x.setFPV(a,b),o},o.addFPV=function(a,b){return x.addFPV(a,b),o},o.getFPV=function(a){return arguments.length<1&&(a=!0),s("getFPV",a)},s=function(a,b){if("getFPV"!==a&&"getFPI"!==a)return i.error(w,"Passing in undefined first party data accessor: "+a),[];var c=[];if(b){var d=i.convertKeyValuePairArrayToObject(y[a]()),e=i.convertKeyValuePairArrayToObject(x[a]());for(var f in e)e.hasOwnProperty(f)&&(d.hasOwnProperty(f)?d[f]=d[f].concat(e[f]):d[f]=e[f]);c=i.convertKeyValuePairObjectToArray(d)}else c=x[a]();return c},o.addKW=function(a){return x.addKW(a),o},o.getKWs=function(a){arguments.length<1&&(a=!0);var b,c=new h,d=x.getKWs(),e=a?y.getKWs():[];for(b=0;b<d.length;b++)c.add(d[b]);for(b=0;b<e.length;b++)c.add(e[b]);return c.toArray()},o.setPosition=function(a){return"atf"!==a&&"btf"!==a||(B.sPos=a),o},o.getPosition=function(){return B.sPos},o.setLanguage=function(a){return B.sLangugage=a,o},o.getLanguage=function(){return B.sLangugage},o.setPlayerSize=function(a,b){return B.nWidth=a,B.nHeight=b,o},o.getPlayerSize=function(){return{width:B.nWidth,height:B.nHeight}},o.getElementId=function(){return B.sElementId},o.getSlotName=function(){return B.sSlotName},o.getSlotType=function(){return n},o.getSiteId=function(a){return B.oAccountConfigs.hasOwnProperty(a)?B.oAccountConfigs[a].nSiteId:null},o.getZoneId=function(a){return B.oAccountConfigs.hasOwnProperty(a)?B.oAccountConfigs[a].nZoneId:null},o.getRubiconSizeIds=function(a){if(!B.oAccountConfigs.hasOwnProperty(a))return[];var b=B.oAccountConfigs[a].aRubiconSizeIds;b=i.filterSizesByAccountRules(b);var c=o.getWhitelistedSizes(a);if(!i.isArray(c)||0===c.length)return b;var d=b.filter(function(a){return-1!==c.indexOf(a)});return b.length!==d.length&&i.warn(v,"Given size ids ["+b.join(",")+"] were whitelisted to ["+d.join(",")+"]"),d},o.getWhitelistedSizes=function(a){var b=o.getZoneId(a),c=d(a)||{};return null!==b&&i.isArray(c[b])?c[b].slice():null},o.storeCreative=function(a,b,c,d,e,f){c.script=c.script||c.creative_content,y.storeCreative(d,c,a,b,e,o,f),z.hasOwnProperty(a)||(z[a]={}),z[a][b]=d,E(a,b,e)},o.removeCreative=function(a,b){z.hasOwnProperty(a)&&delete z[a][b]},o.purgeCreative=function(a,b){o.removeCreative(a,b),o.removeAdServerTargetingForSize("rpfl_"+a,b);var c=q||o.findMatchingGPTSlot();c&&o.setTargetingForGPTSlot(c,o.retrieveAdServerTargeting())},o.findMatchingGPTSlot=function(){var a=!1;if(f.googletag&&f.googletag.apiReady)for(var b=f.googletag.pubads().getSlots(),c=0;c<b.length;c++)if(b[c].getSlotElementId()===o.getElementId()){a=b[c];break}return a},o.getCreative=function(a,b){return z.hasOwnProperty(a)&&z[a].hasOwnProperty(b)&&y.getCreative(z[a][b])||null},o.addAdServerTargeting=function(a,b){A.hasOwnProperty(a)||(A[a]=new h),A[a].add(b),i.info(u,"Adding Ad Server Targeting for Key=",a,", Value=",b)};var E=function(a,b,c){var d="rpfl_"+a;o.removeAdServerTargetingForSize(d,b),o.addAdServerTargeting(d,[b,"_",c].join(""))};o.removeAdServerTargetingByKey=function(a){delete A[a]},o.removeAdServerTargetingForSize=function(a,b){var c=new RegExp("^"+b+"_");if(A[a])for(var d=A[a].length();d>=0;d--)if(c.test(A[a].get(d))){A[a].removeByIndex(d);break}},o.retrieveAdServerTargeting=function(){var a=[];for(var b in A)if(A.hasOwnProperty(b)){var c=A[b].toArray(),d={key:b,values:c};a.push(d)}return a},o.getAdServerTargeting=function(a){var b=i.getDataStoreValue("nRunTimestamp");k.getConfigValue(0,"configuration.testKvp")&&o.addAdServerTargeting("rpfl_"+k.getConfigValue(0,"accountId"),"test");var c=o.retrieveAdServerTargeting();l.mark("slot.getAdServerTargeting"),l.measure("getTargeting","fastlane.run","slot.getAdServerTargeting"),void 0===a&&(a="other");for(var d=0;d<c.length;d++){var e=c[d],f=e.values,g=e.key;
if(g.match(/^rpfl_[0-9]+$/))for(var h=g.replace(/^rpfl_/,""),m=0;m<f.length;m++){var n=f[m],p=n.match(/^([0-9]+)_(.*)$/);p&&(C=Number(new Date)-b,j.factory("SLOT_GET_TARGETING",{nSiteId:o.getSiteId(h),nZoneId:o.getZoneId(h),sSlotName:o.getSlotName(),nSizeId:p[1],sTier:p[2],nAccountId:h,sValue:n,sContext:a,sKey:g,nLatency:C,sElementId:o.getElementId()}))}}return c.slice().reverse()},o.getAdServerTargetingByKey=function(a){return A.hasOwnProperty(a)?A[a].toArray():[]},o.configure=function(){if(!r){for(var a,b=k.getConfigs(),c=0;c<b.length;c++){a=k.getConfigValue(c,"accountId");var d=k.getConfigValue(c,"configuration.slotMapping",["browser"]);if(0===d.length&&(d=["browser"]),-1!==d.indexOf("browser")){var e=y.findBestMatchForConfig(o,c);e?o.loadSlotConfiguration(a,e,!1):i.warn(v+"slot-mapping could not find valid slot configuration")}else o.loadSlotConfiguration(a,null,!0),i.info(u+"skipping client-side slot-mapping in favor of server-side")}return o}},o.loadSlotConfiguration=function(a,b,c){r=!0,B.oAccountConfigs[a]={nSiteId:null,nZoneId:null,aRubiconSizeIds:B.aBaseRubiconSizeIds.slice()},c&&(B.oAccountConfigs[a].bAdEngineMapped=!0);var d={siteId:"nSiteId",zoneId:"nZoneId",sizes:"aRubiconSizeIds"};if(b)for(var e in b)b.hasOwnProperty(e)&&B.oAccountConfigs[a].hasOwnProperty(d[e])&&(B.oAccountConfigs[a][d[e]]=b[e])},o.setTargetingForGPTSlot=function(a,b){q=a,void 0===b&&(b=o.getAdServerTargeting("gpt"));for(var c=0;c<b.length;c++)q.setTargeting(b[c].key,b[c].values);return!0},o.getRawResponses=function(a){var b=[],c=i.getDataStoreValue("nRunTimestamp"),d=o.getSlotType();if(!k.getConfigValue(0,"configuration.exposeRawResponses",!1)&&"video"!==d)return b;a=a||k.getConfigValue(0,"accountId");for(var e in z[a])if(z[a].hasOwnProperty(e)){var f="rpfl_"+a,g=e+"_unused",h=o.getRawResponseBySizeId(e);b.push(h),C=Number(new Date)-c,j.factory("SLOT_GET_TARGETING",{nSiteId:o.getSiteId(a),nZoneId:o.getZoneId(a),sSlotName:o.getSlotName(),nSizeId:e,nAccountId:a,sKey:f,sValue:g,sContext:"raw",sTier:"unused",nLatency:C,sElementId:o.getElementId()})}return b},o.getRawResponseBySize=function(a,b){var c=i.convertDimensionsToSizeId(a);return o.getRawResponseBySizeId(c)},o.getRawResponseBySizeId=function(a,b){var c={},d=o.getSlotType();if(!k.getConfigValue(0,"configuration.exposeRawResponses",!1)&&"video"!==d)return c;b=b||k.getConfigValue(0,"accountId");var e=o.getCreative(b,a);if(e&&e.hasOwnProperty("oResponse")){var f=e.oResponse;c.advertiser=f.advertiser,c.cpm=f.cpm,"video"!==d&&(c.dimensions=i.convertSizeIdToDimensions(a)),c.auction_id=f.impression_id,f.hasOwnProperty("deal")&&(c.deal=f.deal),"video"===d&&f.hasOwnProperty("creative_depot_url")&&(c.creative_depot_url=f.creative_depot_url)}return c},o.getPublicVersion=function(){return null===p&&(p=new m(o)),p},o.addContext=function(){for(var a=0;a<arguments.length;a++)t.add(arguments[a]);return o},o.getContexts=function(){return t.toArray()},o.init(b,c,e,n)};b.exports=n},{10:10,13:13,15:15,19:19,22:22,23:23,8:8,9:9}],21:[function(a,b,c){"use strict";var d=function(){var a=window.navigator.vendor,b=window.navigator.userAgent;return a&&-1!==a.indexOf("Apple")||b&&-1!==b.indexOf("iPhone")&&-1!==b.indexOf("OS X")||b&&-1!==b.indexOf("iPad")&&-1!==b.indexOf("OS X")};if(d()){window.rp_crnetids=[2054,2138,2149,2532,3410];var e="rp_onCRUserIdLoaded",f="//gum.criteo.com/sync?c=2&r=2&j="+e;window[e]=function(a){a&&"OK"===a.status&&a.userid&&(window.rp_cruid=a.userid)};var g=document.createElement("script");g.type="text/javascript",g.async=!1,g.src=("https:"===document.location.protocol?"https:":"http:")+f;var h=document.getElementsByTagName("script")[0];h.parentNode.appendChild(g)}b.exports={}},{}],22:[function(a,b,c){"use strict";var d,e,f=a(23),g=a(8),h={sUrl:"",sIntegration:"",nInitTimestamp:0,nRunTimestamp:0,bHasVideoSlot:!1},i={},j=function(){},k=f.sessionStorage||{setItem:j,getItem:j,removeItem:j},l=function(){var a,b,c,l=this,m=[],n=null,o=null,p=null,q=null,r=!1,s=!1;l.oSlotConfigurationPointSystem={nUrlPattern:10,nDeviceType:50,nContextKeyword:100,nSlotContextKeyword:101,nPosition:500,nSlotIdPattern:1e3,nSlotIdExact:2e3,nElementIdPattern:1e4,nElementIdExact:2e4,nPrimaryAccount:4e4},l.oSizeMap={"468x60":1,"728x90":2,"120x600":8,"160x600":9,"300x600":10,"300x250":15,"336x280":16,"320x50":43,"300x50":44,"300x1050":54,"970x90":55,"970x250":57,"1000x90":58,"320x480":67,"1800x1000":68,"480x320":101,"768x1024":102};var t=[201,202,203,204,205,207];l.mergeVideoSizes=function(){for(var a=0;a<t.length;a++){var b="1x"+t[a];l.oSizeMap[b]=t[a]}},l.mergeVideoSizes(),l.sVersion="4dae6c9",l.DEVICE_DESKTOP="desktop",l.DEVICE_TABLET="tablet",l.DEVICE_PHONE="phone",l.init=function(c){a=b=n(c),l.hookUserDistractionEvents(),o(c)},n=function(a){var b="http:";try{a.location.protocol.match(/^http/)&&(b=a.location.protocol)}catch(c){}return b+"//"},l.getProtocol=function(){return b},l.setProtocol=function(a){a&&a.match(/^http(s)?:\/\/$/)&&(b=a)},l.getFullPageUrl=function(){return l.getUrlSessionParam("rp_url")||l.getUrl()||f.location.toString()},l.getScreenResolution=function(){return f.screen.width+"x"+f.screen.height},l.debug=j,l.info=j,l.warn=j,l.error=j,o=function(a){p(a);var b=parseInt(l.getUrlSessionParam("rp_loglevel"));isNaN(b)&&!g.hasConfig()&&g.onLoad(function(){o(a)}),q(b)},p=function(a){if(a.console)for(var b={debug:"log",info:"info",warn:"warn",error:"error"},c=["debug","info","warn","error"],d=0;d<c.length;d++){var e=c[d],f=b[e];if(a.console[f])try{l[e]=Function.prototype.bind.call(a.console[f],a.console,"RP:")}catch(g){}else d>0&&(l[e]=l[c[d-1]])}},q=function(a){var b=0,c=1,d=2,e=3,f=4;a=isNaN(a)?g.getConfigValue(0,"configuration.logLevel",b):a,f>a&&(l.debug=j),e>a&&(l.info=j),d>a&&(l.warn=j),c>a&&(l.error=j)},l.getUrlSessionParam=function(a){if(a){if(i.hasOwnProperty(a))return i[a];var b=l.getQueryStringParam(a);return b=null===b?l.getHashParam(a):b,b?k.setItem(a,b):null===b?b=k.getItem(a):k.removeItem(a),i[a]=b||null,b||null}},l.getQueryStringParam=function(a){if(!a||-1===(f.location.search||"").indexOf(a))return null;var b=new RegExp("[?&]"+a+"((=([^&]*))|(&|$))"),c=b.exec(decodeURIComponent(f.location.search)||"");return!c||c.length<5?null:c[3]||""},l.queryStringParamExists=function(a){if(!a)return!1;var b=new RegExp("[?&]"+a+"([=&]|$)");return b.test(f.location.search||"")},l.getHashParam=function(a){if(!a||-1===(f.location.hash||"").indexOf(a))return null;var b=new RegExp("[#&]"+a+"((=([^&]*))|(&|$))"),c=b.exec(f.location.hash||"");return!c||c.length<5?null:c[3]||""},l.hashParamExists=function(a){if(!a)return!1;var b=new RegExp("[#&]"+a+"([=&]|$)");return b.test(f.location.hash||"")},l.mergeObjects=function(a,b,c){var d,e={};if(c)for(var f=0;2>f;f++)for(d in arguments[f])arguments[f].hasOwnProperty(d)&&(e[d]=arguments[f][d]);else for(d in a)a.hasOwnProperty(d)&&(e[d]=b.hasOwnProperty(d)?b[d]:a[d]);return e},l.isInteger=function(a){return/string|number/.test(typeof a)&&/^[0-9]+$/.test(a.toString())},l.isSingleSlotSize=function(a){return l.isArray(a)&&2===a.length&&l.isInteger(a[0])&&l.isInteger(a[1])},l.convertDimensionsListToSizeIds=function(a){if(!l.isArray(a))return l.warn("Invalid dimensions list array:",a),!1;if(0===a.length)return[];var b=l.convertDimensionsToSizeId(a);if(b)return[b];var c;if(b=l.convertDimensionsToSizeId(a[0])){c=[b];for(var d=1;d<a.length;d++)b=l.convertDimensionsToSizeId(a[d]),b?c.push(b):l.warn("Invalid [w,h] size:",a[d]);return c}if(l.isInteger(a[0])){var e={};for(var f in l.oSizeMap)l.oSizeMap.hasOwnProperty(f)&&(e[l.oSizeMap[f]]=!0);c=[];for(var g=0;g<a.length;g++)e[a[g]]?c.push(a[g]):l.warn("Invalid rubiconSizeId:",a[g]);return c}return l.warn("Invalid dimensions list array:",a),!1},l.isArray=function(a){return(a||!1)&&l.isObject(a)&&a.hasOwnProperty("length")&&"number"==typeof a.length&&a.length>-1&&"[object Array]"===Object.prototype.toString.call(a)},l.inArray=function(a,b){if(!l.isArray(b))return!1;for(var c=0;c<b.length;c++)if(b[c]==a)return!0;return!1},l.getArrayIntersection=function(a,b){var c=[];if(!l.isArray(a)||!l.isArray(b))return c;for(var d=0;d<a.length;d++)l.inArray(a[d],b)&&c.push(a[d]);return c},l.isObject=function(a){return"object"==typeof a},l.isFunction=function(a){return(a||!1)&&"[object Function]"===Object.prototype.toString.call(a)},l.generateComplexQueryStringObject=function(a,b){for(var c={},d=null,e=0;e<a.length;e++)d=b+"."+a[e].key,c[d]=a[e].value.join(",");return c},l.convertObjectToQueryString=function(a){var b=[];for(var c in a)a.hasOwnProperty(c)&&b.push(encodeURIComponent(c)+"="+encodeURIComponent(a[c]));return b.join("&")},l.convertKeyValuePairArrayToObject=function(a){for(var b={},c=0;c<a.length;c++)b[a[c].key]=a[c].value;return b},l.convertKeyValuePairObjectToArray=function(a){var b=[];for(var c in a)a.hasOwnProperty(c)&&b.push({key:c,value:a[c]});return b},l.formatString=function(a,b,c){var d=a;c=c||!1;for(var e in b)b.hasOwnProperty(e)&&(d=d.replace(new RegExp("{"+e+"}","g"),c?encodeURIComponent(b[e]):b[e]));return d},l.convertDimensionsToSizeId=function(a){if(!l.isSingleSlotSize(a))return!1;var b=a[0]+"x"+a[1];return l.oSizeMap.hasOwnProperty(b)?l.oSizeMap[b]:!1},l.convertSizeIdToDimensions=function(a){for(var b in l.oSizeMap)if(l.oSizeMap.hasOwnProperty(b)&&parseInt(l.oSizeMap[b],10)===parseInt(a,10)){var c=b.split("x");return c[0]=parseInt(c[0],10),c[1]=parseInt(c[1],10),c}return!1},l.normalizeDimensions=function(a){if(l.convertDimensionsToSizeId(a)&&(a=[a]),!l.isArray(a))return[];var b=[];for(var c in a)if(a.hasOwnProperty(c)){var d=a[c],e=l.convertSizeIdToDimensions(d);e!==!1?b.push(e):b.push(d)}return l.cleanseDimensionsList(b)},l.cleanseDimensionsList=function(a){var b=[];if(l.isArray(a)&&0!==a.length)if(l.isSingleSlotSize(a))b=[a];else for(var c=0;c<a.length;c++)l.isSingleSlotSize(a[c])&&b.push(a[c]);else;return b},l.addUserDistractionEventListener=function(a){m.push(a)},l.hookUserDistractionEvents=function(){var a=function(a){l.userDistractionEventOccurred(a)};f.addEventListener?(f.addEventListener("unload",a,!1),f.addEventListener("blur",a,!1)):f.attachEvent&&(f.attachEvent("onunload",a),f.attachEvent("onblur",a))},l.userDistractionEventOccurred=function(a){for(var b=0;b<m.length;b++)m[b](a)},l.getNow=function(){return(new Date).getTime()},l.browserSupportsXHR=function(){var a=l.isIE();return!(a&&10>a)},l.isIE=function(){var a=f.navigator.userAgent.toLowerCase();return-1!==a.indexOf("msie")?parseInt(a.split("msie")[1]):!1},l.getDeviceType=function(){var a=f.screen.height||1025,b=f.screen.width||1025,c=Math.max(a,b),d=l.DEVICE_DESKTOP;return 736>=c?d=l.DEVICE_PHONE:1024>=c&&(d=l.DEVICE_TABLET),d},l.createInvisibleIframe=function(a){var b=document.createElement("iframe");return b.id=a,b.height=0,b.width=0,b.border="0px",b.hspace="0",b.vspace="0",b.marginWidth="0",b.marginHeight="0",b.style.border="0",b.scrolling="no",b.frameBorder="0",l.isIE()&&l.isIE()<10?b.src='javascript:(function(){document.open();document.domain="'+document.domain+'";document.close();})()':b.src="about:self",b.style.display="none",b},l.setUrl=function(a){return g.getConfigValue(0,"configuration.allowSetUrl")!==!0?void l.warn("Cannot manually set URL since it is not allowed in the configuration."):void(l.isUrl(a)&&(h.sUrl=a))},l.getUrl=function(a){return h.sUrl},l.isUrl=function(a){return"string"!=typeof a?!1:/^(https?:)?\/\/[a-zA-Z\d\-]+/.test(a)},l.setSizesFilteredByAccountRules=function(a,b){if(!r){for(var d=b.getConfigValue(0,"accountRules",[]),e={nPoints:0,oConfig:!1},f=0;f<d.length;f++){var g=d[f],h="Account Rules Filtering: ";l.debug(h,"Starting specificity calculation for config: ",g);var i=0;if(g.deviceType){s=!0;var j=l.getPointCalculationDeviceType(g.deviceType,h);if(0===j)continue;i+=j}if(g.urlPattern){s=!0;var k=l.getPointCalculationUrl(g.urlPattern,h);if(0===k)continue;i+=k}if(g.contextKeywords){s=!0;var m=l.getPointCalculationContextKeywords(g.contextKeywords,[],a.getContexts(),h);if(0===m)continue;i+=m}i>0?l.info("Account Rules Filter INFO: ","Found matching config entry. Points: "+i+", Config: ",g):l.debug(h,"Config did not match: ",g),i>e.nPoints&&(e.nPoints=i,e.oConfig=g)}c=l.convertDimensionsListToSizeIds(e.oConfig.allowedSizes)||[],r=!0}},l.filterSizesByAccountRules=function(a){if(!s)return a;var b=a.filter(function(a){return-1!==c.indexOf(a)});return a.length!==b.length&&l.warn("Account Rules Filter WARN: ","Given size ids ["+a.join(",")+"] were filtered by Account Rules to ["+b.join(",")+"]"),b},l.getPointCalculationDeviceType=function(a,b){var c=l.getDeviceType();return l.inArray(c,a)?(l.debug(b,"Device type match. Device type: "+c+", configured: "+a.join(",")+", points: "+l.oSlotConfigurationPointSystem.nDeviceType+"."),l.oSlotConfigurationPointSystem.nDeviceType):(l.debug(b,"Device type match failed. Device type: "+c+", configured: "+a.join(",")+". Skipping."),0)},l.getPointCalculationUrl=function(a,b){var c=l.getFullPageUrl(),d=new RegExp(a);return d.test(c)?(l.debug(b,"Partial URL match. URL: "+c+", pattern: "+a+", points: "+l.oSlotConfigurationPointSystem.nUrlPattern+"."),l.oSlotConfigurationPointSystem.nUrlPattern):(l.debug(b,"URL match failed. URL: "+c+", pattern: "+a+". Skipping."),0)},l.getPointCalculationContextKeywords=function(a,b,c,d){var e=0;if(a){var f;l.debug(d,"Configured context keywords:",a),l.debug(d,"Page context keywords:",b),l.debug(d,"Slot context keywords:",c);var g=l.getArrayIntersection(a,b);if(g.length&&(e+=g.length*l.oSlotConfigurationPointSystem.nContextKeyword,l.debug(d,"Page context matches:"+g.length+", points: "+e+".")),f=l.getArrayIntersection(a,c),f.length&&(e+=f.length*l.oSlotConfigurationPointSystem.nSlotContextKeyword,l.debug(d,"Slot context matches: "+f.length+", points: "+e+".")),0===g.length&&(!f||0===f.length))return l.debug(d,"Context matches failed, Skipping"),0}return e},l.replaceMacrosWithinUrl=function(a,b){var c;if("string"!=typeof a)return"";for(var d in b)b.hasOwnProperty(d)&&(c=new RegExp("\\$\\$"+d+"\\$\\$","gi"),a=a.replace(c,encodeURIComponent(b[d])));return a=a.replace(/\$\$[^<>&?=+*#@!%^~;\s'"]+\$\$/gi,"")},l.setIntegration=function(a){h.sIntegration=a},l.getIntegration=function(){return h.sIntegration},l.setTimestamp=function(a){h[a]=Number(new Date)},l.getDataStoreValue=function(a){return h[a]},l.isSingleRequest=function(a){if(h.bHasVideoSlot)return!0;if(!l.browserSupportsXHR())return!1;var b=l.getABTestParam("sra");return b?"on"===b:(a=a||0,!!g.getConfigValue(0,"configuration.useSingleRequest",!1))},l.setHasVideoSlot=function(){h.bHasVideoSlot=!0},l.getABTestParam=function(a){if(!d){d={};var b=g.getConfigValue(0,"configuration.abParams",{}),c=Object.keys(b).sort(),f=[],h=[];c.forEach(function(a){var c=b[a];if(c.length){h.push(c.length);var e=u(c);f.push(e[0]),d[a]=e[1],l.warn("a/b testing:",a,"=",d[a])}}),e=v(h,f),e&&l.warn("a/b testing label:",e)}return d[a]};var u=function(a){if(!("string"==typeof a[0]&&a[0].indexOf(":")>0)){var b=Math.floor(Math.random()*a.length);return[b,a[b]]}for(var c=100*Math.random(),d=0,e=0;e<a.length;e++){var f=a[e].split(":");if(d+=parseInt(f[1],10),d>c)return[e,f[0]]}return l.error("failed to choose A/B test value for",a),["",void 0]};l.getABLabel=function(){return e};var v=function(a,b){if(!a.length)return"";for(var c=1,d=0,e=a.length-1;e>=0;e--)d+=c*b[e],c*=a[e];return"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(d)};l.usesFastlaneExpress=function(){if(!g.getConfigValue(0,"configuration.fastlaneExpress",!1))return!1;var a=f.document.getElementById("fastlane-express");return a&&"on"===a.getAttribute("data-flex")}},m=new l;m.init(f),b.exports=m},{23:23,8:8}],23:[function(a,b,c){"use strict";b.exports="undefined"!=typeof window?window:void 0},{}],24:[function(a,b,c){"use strict";b.exports="undefined"!=typeof XMLHttpRequest?XMLHttpRequest:void 0},{}]},{},[2]);window.rubicontag.loadConfiguration({"accountId":8737,"services":["fastlane"],"tiers":[{"floor":1.5,"ceiling":1.59,"mapping":"tier0150","hasDeals":false},{"floor":1.6,"ceiling":1.69,"mapping":"tier0160","hasDeals":false},{"floor":1.7,"ceiling":1.79,"mapping":"tier0170","hasDeals":false},{"floor":1.8,"ceiling":1.89,"mapping":"tier0180","hasDeals":false},{"floor":1.9,"ceiling":1.99,"mapping":"tier0190","hasDeals":false},{"floor":2,"ceiling":2.09,"mapping":"tier0200","hasDeals":false},{"floor":2.1,"ceiling":2.19,"mapping":"tier0210","hasDeals":false},{"floor":2.2,"ceiling":2.29,"mapping":"tier0220","hasDeals":false},{"floor":2.3,"ceiling":2.39,"mapping":"tier0230","hasDeals":false},{"floor":2.4,"ceiling":2.49,"mapping":"tier0240","hasDeals":false},{"floor":2.5,"ceiling":2.59,"mapping":"tier0250","hasDeals":false},{"floor":2.6,"ceiling":2.69,"mapping":"tier0260","hasDeals":false},{"floor":2.7,"ceiling":2.79,"mapping":"tier0270","hasDeals":false},{"floor":2.8,"ceiling":2.89,"mapping":"tier0280","hasDeals":false},{"floor":2.9,"ceiling":2.99,"mapping":"tier0290","hasDeals":false},{"floor":3,"ceiling":3.09,"mapping":"tier0300","hasDeals":false},{"floor":3.1,"ceiling":3.19,"mapping":"tier0310","hasDeals":false},{"floor":3.2,"ceiling":3.29,"mapping":"tier0320","hasDeals":false},{"floor":3.3,"ceiling":3.39,"mapping":"tier0330","hasDeals":false},{"floor":3.4,"ceiling":3.49,"mapping":"tier0340","hasDeals":false},{"floor":3.5,"ceiling":3.59,"mapping":"tier0350","hasDeals":false},{"floor":3.6,"ceiling":3.69,"mapping":"tier0360","hasDeals":false},{"floor":3.7,"ceiling":3.79,"mapping":"tier0370","hasDeals":false},{"floor":3.8,"ceiling":3.89,"mapping":"tier0380","hasDeals":false},{"floor":3.9,"ceiling":3.99,"mapping":"tier0390","hasDeals":false},{"floor":4,"ceiling":4.09,"mapping":"tier0400","hasDeals":false},{"floor":4.1,"ceiling":4.19,"mapping":"tier0410","hasDeals":false},{"floor":4.2,"ceiling":4.29,"mapping":"tier0420","hasDeals":false},{"floor":4.3,"ceiling":4.39,"mapping":"tier0430","hasDeals":false},{"floor":4.4,"ceiling":4.49,"mapping":"tier0440","hasDeals":false},{"floor":4.5,"ceiling":4.59,"mapping":"tier0450","hasDeals":false},{"floor":4.6,"ceiling":4.69,"mapping":"tier0460","hasDeals":false},{"floor":4.7,"ceiling":4.79,"mapping":"tier0470","hasDeals":false},{"floor":4.8,"ceiling":4.89,"mapping":"tier0480","hasDeals":false},{"floor":4.9,"ceiling":4.99,"mapping":"tier0490","hasDeals":false},{"floor":5,"ceiling":5.09,"mapping":"tier0500","hasDeals":false},{"floor":5.1,"ceiling":5.19,"mapping":"tier0510","hasDeals":false},{"floor":5.2,"ceiling":5.29,"mapping":"tier0520","hasDeals":false},{"floor":5.3,"ceiling":5.39,"mapping":"tier0530","hasDeals":false},{"floor":5.4,"ceiling":5.49,"mapping":"tier0540","hasDeals":false},{"floor":5.5,"ceiling":5.59,"mapping":"tier0550","hasDeals":false},{"floor":5.6,"ceiling":5.69,"mapping":"tier0560","hasDeals":false},{"floor":5.7,"ceiling":5.79,"mapping":"tier0570","hasDeals":false},{"floor":5.8,"ceiling":5.89,"mapping":"tier0580","hasDeals":false},{"floor":5.9,"ceiling":5.99,"mapping":"tier0590","hasDeals":false},{"floor":6,"ceiling":6.09,"mapping":"tier0600","hasDeals":false},{"floor":6.1,"ceiling":6.19,"mapping":"tier0610","hasDeals":false},{"floor":6.2,"ceiling":6.29,"mapping":"tier0620","hasDeals":false},{"floor":6.3,"ceiling":6.39,"mapping":"tier0630","hasDeals":false},{"floor":6.4,"ceiling":6.49,"mapping":"tier0640","hasDeals":false},{"floor":6.5,"ceiling":6.59,"mapping":"tier0650","hasDeals":false},{"floor":6.6,"ceiling":6.69,"mapping":"tier0660","hasDeals":false},{"floor":6.7,"ceiling":6.79,"mapping":"tier0670","hasDeals":false},{"floor":6.8,"ceiling":6.89,"mapping":"tier0680","hasDeals":false},{"floor":6.9,"ceiling":6.99,"mapping":"tier0690","hasDeals":false},{"floor":7,"ceiling":7.09,"mapping":"tier0700","hasDeals":false},{"floor":7.1,"ceiling":7.19,"mapping":"tier0710","hasDeals":false},{"floor":7.2,"ceiling":7.29,"mapping":"tier0720","hasDeals":false},{"floor":7.3,"ceiling":7.39,"mapping":"tier0730","hasDeals":false},{"floor":7.4,"ceiling":7.49,"mapping":"tier0740","hasDeals":false},{"floor":7.5,"ceiling":7.59,"mapping":"tier0750","hasDeals":false},{"floor":7.6,"ceiling":7.69,"mapping":"tier0760","hasDeals":false},{"floor":7.7,"ceiling":7.79,"mapping":"tier0770","hasDeals":false},{"floor":7.8,"ceiling":7.89,"mapping":"tier0780","hasDeals":false},{"floor":7.9,"ceiling":7.99,"mapping":"tier0790","hasDeals":false},{"floor":8,"ceiling":8.09,"mapping":"tier0800","hasDeals":false},{"floor":8.1,"ceiling":8.19,"mapping":"tier0810","hasDeals":false},{"floor":8.2,"ceiling":8.29,"mapping":"tier0820","hasDeals":false},{"floor":8.3,"ceiling":8.39,"mapping":"tier0830","hasDeals":false},{"floor":8.4,"ceiling":8.49,"mapping":"tier0840","hasDeals":false},{"floor":8.5,"ceiling":8.59,"mapping":"tier0850","hasDeals":false},{"floor":8.6,"ceiling":8.69,"mapping":"tier0860","hasDeals":false},{"floor":8.7,"ceiling":8.79,"mapping":"tier0870","hasDeals":false},{"floor":8.8,"ceiling":8.89,"mapping":"tier0880","hasDeals":false},{"floor":8.9,"ceiling":8.99,"mapping":"tier0890","hasDeals":false},{"floor":9,"ceiling":9.09,"mapping":"tier0900","hasDeals":false},{"floor":9.1,"ceiling":9.19,"mapping":"tier0910","hasDeals":false},{"floor":9.2,"ceiling":9.29,"mapping":"tier0920","hasDeals":false},{"floor":9.3,"ceiling":9.39,"mapping":"tier0930","hasDeals":false},{"floor":9.4,"ceiling":9.49,"mapping":"tier0940","hasDeals":false},{"floor":9.5,"ceiling":9.59,"mapping":"tier0950","hasDeals":false},{"floor":9.6,"ceiling":9.69,"mapping":"tier0960","hasDeals":false},{"floor":9.7,"ceiling":9.79,"mapping":"tier0970","hasDeals":false},{"floor":9.8,"ceiling":9.89,"mapping":"tier0980","hasDeals":false},{"floor":9.9,"ceiling":9.99,"mapping":"tier0990","hasDeals":false},{"floor":10,"ceiling":10.49,"mapping":"tier1000","hasDeals":false},{"floor":10.5,"ceiling":10.99,"mapping":"tier1050","hasDeals":false},{"floor":11,"ceiling":11.49,"mapping":"tier1100","hasDeals":false},{"floor":11.5,"ceiling":11.99,"mapping":"tier1150","hasDeals":false},{"floor":12,"ceiling":12.49,"mapping":"tier1200","hasDeals":false},{"floor":12.5,"ceiling":12.99,"mapping":"tier1250","hasDeals":false},{"floor":13,"ceiling":13.49,"mapping":"tier1300","hasDeals":false},{"floor":13.5,"ceiling":13.99,"mapping":"tier1350","hasDeals":false},{"floor":14,"ceiling":14.49,"mapping":"tier1400","hasDeals":false},{"floor":14.5,"ceiling":14.99,"mapping":"tier1450","hasDeals":false},{"floor":15,"ceiling":15.99,"mapping":"tier1500","hasDeals":false},{"floor":16,"ceiling":16.99,"mapping":"tier1600","hasDeals":false},{"floor":17,"ceiling":17.99,"mapping":"tier1700","hasDeals":false},{"floor":18,"ceiling":18.99,"mapping":"tier1800","hasDeals":false},{"floor":19,"ceiling":19.99,"mapping":"tier1900","hasDeals":false},{"floor":20,"ceiling":20.99,"mapping":"tier2000","hasDeals":false},{"floor":21,"ceiling":21.99,"mapping":"tier2100","hasDeals":false},{"floor":22,"ceiling":22.99,"mapping":"tier2200","hasDeals":false},{"floor":23,"ceiling":23.99,"mapping":"tier2300","hasDeals":false},{"floor":24,"ceiling":24.99,"mapping":"tier2400","hasDeals":false},{"floor":25,"ceiling":99999,"mapping":"tier2500","hasDeals":false}],"slots":[],"catchAll":{"siteId":11111,"zoneId":111111},"configuration":{"timeout":1000,"analyticsLevel":-1,"logLevel":1,"useMultiSize":true},"fastlane":{"pageSampling":1},"version":"1477611284L","modified":1477611284000});window.rubicontag.init();